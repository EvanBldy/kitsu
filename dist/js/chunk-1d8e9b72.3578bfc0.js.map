{"version":3,"sources":["webpack:///./src/components/widgets/PreviewRow.vue?4c04","webpack:///./src/components/widgets/ButtonLink.vue?4816","webpack:///./src/components/pages/Task.vue?317d","webpack:///./src/components/widgets/PreviewRow.vue?159d","webpack:///src/components/widgets/PreviewRow.vue","webpack:///./src/components/widgets/PreviewRow.vue?518d","webpack:///./src/components/widgets/PreviewRow.vue","webpack:///src/components/pages/Task.vue","webpack:///./src/components/pages/Task.vue?e2c7","webpack:///./src/components/pages/Task.vue","webpack:///./src/components/pages/Task.vue?6fc1","webpack:///./src/components/widgets/ButtonLink.vue?c765","webpack:///src/components/widgets/ButtonLink.vue","webpack:///./src/components/widgets/ButtonLink.vue?3972","webpack:///./src/components/widgets/ButtonLink.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","entityPage","taskEntityPath","_v","_s","currentTask","title","currentTaskType","currentProduction","id","_e","isAssigned","isSubscribed","on","toggleSubscribe","$t","_l","personId","key","personMap","get","ref","errors","addComment","loading","isMovie","user","currentTeam","taskStatusForCurrentUser","attachedFileName","parseInt","currentFps","currentTime","currentRevision","onAddPreviewClicked","onDuplicateComment","selectFile","extractAnnotationSnapshots","currentTaskComments","length","comment","index","person","isCurrentUserAdmin","pinnedCount","isStatusChange","ackComment","onPinComment","onEditComment","onDeleteComment","saveComment","timeCodeClicked","isPreviews","isCurrentUserManager","class","button","setPreview","entity","preview_file_id","currentPreviewId","preview","previewPath","currentPreview","previews","taskTypeMap","taskEntityPreviews","isCurrentUserArtist","lastFivePreviews","onAnnotationChanged","onAddExtraPreviewClicked","onRemoveExtraPreviewClicked","changeCurrentPreview","onTimeUpdated","estimation","formatDuration","duration","retake_count","formatSimpleDate","start_date","due_date","modals","addPreview","addPreviewFormData","$event","closeAddPreviewModal","addExtraPreview","addExtraPreviewFormData","hideExtraPreviewModal","createExtraPreview","editComment","commentToEdit","confirmEditTaskComment","onCancelEditComment","deleteComment","confirmDeleteTaskComment","onCancelDeleteComment","deleteExtraPreview","hideRemoveExtraPreviewModal","confirmDeleteTaskPreview","staticRenderFns","selected","green","validation_status","label","name","components","ButtonLink","props","type","default","computed","methods","component","mixins","AddComment","AddPreviewModal","Comment","ChevronLeftIcon","DeleteModal","EditCommentModal","ImageIcon","PageSubtitle","PeopleAvatar","PreviewRow","PreviewPlayer","Spinner","SubscribeButton","TaskTypeName","ValidationTag","data","selectedTab","taskLoading","isLoading","isError","deleteTask","currentTaskPreviews","created","clearSelectedTasks","loadTaskData","mounted","reset","$nextTick","window","mapGetters","isPreviewButtonVisible","extension","previewId","productionMap","project_id","fps","revision","isCommentingAllowed","taskTypeBorder","border","task_type_color","deleteTaskPath","taskPath","entityId","params","production_id","route","$route","episode_id","slice","entityList","displayedShots","displayedAssets","previousEntity","previousEntityIndex","taskId","firstTraversal","nextEntity","nextEntityIndex","previewPlayer","$refs","isTVShow","entityName","split","splice","join","windowTitle","deleteText","assignees","some","assigneeId","task_type_id","team","map","filter","mapActions","getEntityPage","search","task","loadTaskComments","then","catch","console","loadTask","callback","loadingFunction","getCurrentTask","taskMap","task_id","getCurrentComment","comment_id","getTaskComment","getCurrentTaskComments","getTaskComments","getCurrentTaskPreviews","getTaskPreviews","attachment","checklist","taskStatusId","action","$store","dispatch","forms","loadPreviewFileFormData","isHighlighted","findIndex","addCommentExtraPreview","commentId","setTimeout","resetPreview","changeRoute","$router","push","editTaskComment","deleteTaskComment","displayFirst","deleteTaskPreview","onPreviewAdded","eventData","commit","unsubscribeFromTask","subscribeToTask","currentEpisode","updatePreviewAnnotation","additions","deletions","updates","showRemoveExtraPreviewModal","currentExtraPreviewId","setValue","pinComment","time","onRemoteAcknowledge","versionRevision","frame","minutes","seconds","milliseconds","find","files","watch","socket","events","c","refreshPreview","replies","reply","refreshComment","metaInfo","path","icon","startsWith","isText","text","isResponsive","DownloadIcon","EditIcon","PlusIcon","RotateCcwIcon","TrashIcon","UploadIcon"],"mappings":"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","file":"js/chunk-1d8e9b72.3578bfc0.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreviewRow.vue?vue&type=style&index=0&id=15179c2b&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ButtonLink.vue?vue&type=style&index=0&id=143e1424&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fixed-page columns\"},[_c('div',{staticClass:\"page column main-column\"},[_c('div',{staticClass:\"page-header\"},[(_vm.currentTask)?_c('div',{staticClass:\"flexrow header-title\"},[_c('router-link',{staticClass:\"flexrow-item has-text-centered back-link\",attrs:{\"to\":_vm.entityPage}},[_c('chevron-left-icon')],1),_c('div',{staticClass:\"title flexrow-item\"},[_c('router-link',{attrs:{\"to\":_vm.taskEntityPath}},[_vm._v(\" \"+_vm._s(_vm.currentTask ? _vm.title : 'Loading...')+\" \")])],1),(_vm.currentTaskType)?_c('task-type-name',{staticClass:\"flexrow-item task-type\",attrs:{\"task-type\":_vm.currentTaskType,\"production-id\":_vm.currentProduction.id}}):_vm._e(),(!_vm.isAssigned)?_c('subscribe-button',{staticClass:\"flexrow-item action-button\",attrs:{\"subscribed\":_vm.isAssigned || _vm.isSubscribed},on:{\"click\":_vm.toggleSubscribe}}):_vm._e()],1):_vm._e(),(_vm.currentTask)?_c('div',{staticClass:\"flexrow task-information\"},[_c('span',{staticClass:\"flexrow-item\"},[_vm._v(_vm._s(_vm.$t('tasks.current_status')))]),(_vm.currentTask)?_c('validation-tag',{staticClass:\"is-medium flexrow-item\",attrs:{\"task\":_vm.currentTask,\"is-static\":true}}):_vm._e(),_c('span',{staticClass:\"flexrow-item\"},[_vm._v(_vm._s(_vm.$t('tasks.fields.assignees'))+\":\")]),_vm._l((_vm.currentTask.assignees),function(personId){return _c('span',{key:personId,staticClass:\"flexrow-item avatar-wrapper\"},[_c('people-avatar',{key:personId,staticClass:\"flexrow-item\",attrs:{\"person\":_vm.personMap.get(personId),\"size\":30,\"font-size\":16}})],1)})],2):_vm._e()]),_c('div',{ref:\"task-columns\",staticClass:\"task-columns\"},[_c('div',{staticClass:\"task-column comments-column\"},[(_vm.currentTask)?_c('div',[_c('div',[(_vm.isCommentingAllowed)?_c('add-comment',{ref:\"add-comment\",attrs:{\"is-error\":_vm.errors.addComment,\"is-loading\":_vm.loading.addComment,\"is-movie\":_vm.isMovie,\"user\":_vm.user,\"team\":_vm.currentTeam,\"task\":_vm.currentTask,\"task-status\":_vm.taskStatusForCurrentUser,\"attached-file-name\":_vm.attachedFileName,\"fps\":parseInt(_vm.currentFps),\"time\":_vm.currentTime,\"revision\":_vm.currentRevision},on:{\"add-comment\":_vm.addComment,\"add-preview\":_vm.onAddPreviewClicked,\"duplicate-comment\":_vm.onDuplicateComment,\"file-drop\":_vm.selectFile,\"annotation-snapshots-requested\":_vm.extractAnnotationSnapshots}}):_vm._e(),(_vm.currentTaskComments && _vm.currentTaskComments.length > 0)?_c('div',{staticClass:\"comments\"},_vm._l((_vm.currentTaskComments),function(comment,index){return _c('comment',{key:comment.id,attrs:{\"comment\":comment,\"task\":_vm.currentTask,\"highlighted\":false,\"current-user\":_vm.user,\"editable\":(\n                  comment.person && _vm.user.id === comment.person.id ||\n                  _vm.isCurrentUserAdmin\n                ),\"is-first\":index === 0,\"is-last\":index === _vm.pinnedCount,\"is-change\":_vm.isStatusChange(index)},on:{\"ack-comment\":_vm.ackComment,\"pin-comment\":_vm.onPinComment,\"edit-comment\":_vm.onEditComment,\"delete-comment\":_vm.onDeleteComment,\"checklist-updated\":_vm.saveComment,\"time-code-clicked\":_vm.timeCodeClicked}})}),1):_c('div',{staticClass:\"no-comment\"},[_c('em',[_vm._v(\" \"+_vm._s(_vm.$t('tasks.no_comment'))+\" \")])])],1)]):_c('div',{staticClass:\"has-text-centered\"},[_c('spinner')],1)]),_c('div',{staticClass:\"task-column preview-column\"},[_c('div',{staticClass:\"preview-column-content\"},[_c('div',{staticClass:\"flexrow preview-header\"},[_c('h2',{staticClass:\"subtitle flexrow-item\"},[_vm._v(\" \"+_vm._s(_vm.$t('tasks.preview'))+\" \")]),(_vm.isPreviewButtonVisible)?_c('div',{staticClass:\"set-main-preview flexrow-item flexrow pull-right\"},[(_vm.isPreviews && _vm.isCurrentUserManager)?_c('button',{class:{\n                  button: true,\n                  'flexrow-item': true,\n                  'is-loading': _vm.loading.setPreview\n                },on:{\"click\":_vm.setPreview}},[_c('image-icon',{staticClass:\"icon\"}),_c('span',{staticClass:\"text\"},[_vm._v(\" \"+_vm._s(_vm.$t('tasks.set_preview'))+\" \")])],1):_vm._e(),(_vm.errors.setPreview)?_c('span',{staticClass:\"error flexrow-item\"},[_vm._v(\" \"+_vm._s(_vm.$t('tasks.set_preview_error'))+\" \")]):_vm._e()]):_vm._e(),(_vm.currentTask && _vm.currentTask.entity && _vm.currentTask.entity.preview_file_id === _vm.currentPreviewId)?_c('div',{staticClass:\"set-main-preview flexrow-item pull-right\"},[_c('em',[_vm._v(_vm._s(_vm.$t('tasks.set_preview_done')))])]):_vm._e()]),(_vm.isPreviews)?_c('div',{staticClass:\"preview-list mt2\"},_vm._l((_vm.currentTaskPreviews),function(preview){return _c('preview-row',{key:preview.id,attrs:{\"preview\":preview,\"preview-path\":_vm.previewPath(preview.id),\"taskId\":_vm.currentTask ? _vm.currentTask.id : '',\"selected\":preview.id === _vm.currentPreviewId}})}),1):_c('div',[_c('em',[_vm._v(\" \"+_vm._s(_vm.$t('tasks.no_preview'))+\" \")])]),_c('div',{staticClass:\"preview-area\"},[(_vm.isPreviews)?_c('div',[(_vm.currentPreview)?_c('preview-player',{ref:\"preview-player\",attrs:{\"previews\":_vm.currentPreview.previews,\"task-type-map\":_vm.taskTypeMap,\"entity-preview-files\":_vm.taskEntityPreviews,\"read-only\":_vm.isCurrentUserArtist,\"last-preview-files\":_vm.lastFivePreviews,\"task\":_vm.currentTask},on:{\"annotation-changed\":_vm.onAnnotationChanged,\"add-extra-preview\":_vm.onAddExtraPreviewClicked,\"remove-extra-preview\":_vm.onRemoveExtraPreviewClicked,\"change-current-preview\":_vm.changeCurrentPreview,\"time-updated\":_vm.onTimeUpdated}}):_vm._e()],1):_vm._e()])]),_c('div',{staticClass:\"flexrow-item task-information\"},[_c('page-subtitle',{attrs:{\"text\":_vm.$t('main.info')}}),_c('div',{staticClass:\"table-body mt1\"},[(_vm.currentTask)?_c('table',{staticClass:\"datatable\"},[_c('tbody',{staticClass:\"table-body\"},[_c('tr',{staticClass:\"datatable-row\"},[_c('td',{staticClass:\"field-label\"},[_vm._v(_vm._s(_vm.$t('tasks.fields.estimation')))]),_c('td',[_vm._v(_vm._s(_vm.currentTask.estimation))])]),_c('tr',{staticClass:\"datatable-row\"},[_c('td',{staticClass:\"field-label\"},[_vm._v(_vm._s(_vm.$t('tasks.fields.duration')))]),_c('td',[_vm._v(_vm._s(_vm.formatDuration(_vm.currentTask.duration)))])]),_c('tr',{staticClass:\"datatable-row\"},[_c('td',{staticClass:\"field-label\"},[_vm._v(_vm._s(_vm.$t('tasks.fields.retake_count')))]),_c('td',[_vm._v(_vm._s(_vm.currentTask.retake_count))])]),_c('tr',{staticClass:\"datatable-row\"},[_c('td',{staticClass:\"field-label\"},[_vm._v(_vm._s(_vm.$t('tasks.fields.start_date')))]),_c('td',[_vm._v(_vm._s(_vm.formatSimpleDate(_vm.currentTask.start_date)))])]),_c('tr',{staticClass:\"datatable-row\"},[_c('td',{staticClass:\"field-label\"},[_vm._v(_vm._s(_vm.$t('tasks.fields.due_date')))]),_c('td',[_vm._v(_vm._s(_vm.formatSimpleDate(_vm.currentTask.due_date)))])])])]):_vm._e()])],1),_c('div',{staticClass:\"pa2\"})])]),_c('add-preview-modal',{ref:\"add-preview-modal\",attrs:{\"active\":_vm.modals.addPreview,\"is-loading\":_vm.loading.addPreview,\"is-error\":_vm.errors.addPreview,\"form-data\":_vm.addPreviewFormData},on:{\"cancel\":function($event){_vm.modals.addPreview = false},\"fileselected\":_vm.selectFile,\"confirm\":_vm.closeAddPreviewModal}}),_c('add-preview-modal',{ref:\"add-extra-preview-modal\",attrs:{\"active\":_vm.modals.addExtraPreview,\"is-loading\":_vm.loading.addExtraPreview,\"is-error\":_vm.errors.addExtraPreview,\"form-data\":_vm.addExtraPreviewFormData},on:{\"cancel\":_vm.hideExtraPreviewModal,\"fileselected\":_vm.selectFile,\"confirm\":_vm.createExtraPreview}}),_c('edit-comment-modal',{attrs:{\"active\":_vm.modals.editComment,\"is-loading\":_vm.loading.editComment,\"is-error\":_vm.errors.editComment,\"comment-to-edit\":_vm.commentToEdit,\"team\":_vm.currentTeam},on:{\"confirm\":_vm.confirmEditTaskComment,\"cancel\":_vm.onCancelEditComment}}),_c('delete-modal',{attrs:{\"active\":_vm.modals.deleteComment,\"is-loading\":_vm.loading.deleteComment,\"is-error\":_vm.errors.deleteComment,\"text\":_vm.$t('tasks.delete_comment'),\"error-text\":_vm.$t('tasks.delete_comment_error')},on:{\"confirm\":_vm.confirmDeleteTaskComment,\"cancel\":_vm.onCancelDeleteComment}}),_c('delete-modal',{attrs:{\"active\":_vm.modals.deleteExtraPreview,\"is-loading\":_vm.loading.deleteExtraPreview,\"is-error\":_vm.errors.deleteExtraPreview,\"text\":_vm.$t('tasks.delete_preview'),\"error-text\":_vm.$t('tasks.delete_preview_error')},on:{\"cancel\":_vm.hideRemoveExtraPreviewModal,\"confirm\":_vm.confirmDeleteTaskPreview}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{\n  'preview-row': true,\n  'has-text-center': true,\n  selected: _vm.selected,\n  green: _vm.preview.validation_status === 'validated'\n}},[_c('button-link',{attrs:{\"text\":_vm.label,\"path\":_vm.previewPath}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div :class=\"{\n  'preview-row': true,\n  'has-text-center': true,\n  selected: selected,\n  green: preview.validation_status === 'validated'\n}\">\n  <button-link\n    :text=\"label\"\n    :path=\"previewPath\"\n  />\n</div>\n</template>\n\n<script>\nimport ButtonLink from '@/components/widgets/ButtonLink.vue'\n\nexport default {\n  name: 'preview-row',\n  components: {\n    ButtonLink\n  },\n  props: {\n    preview: {\n      type: Object,\n      default: () => {}\n    },\n    selected: {\n      type: Boolean,\n      default: false\n    },\n    previewPath: {\n      type: Object,\n      default: () => {}\n    }\n  },\n  computed: {\n    label () {\n      const label = `v${this.preview.revision}`\n      return label\n    }\n  },\n  methods: {\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.preview-row {\n  margin-right: 0.5em;\n}\n\n.preview-row a {\n  border: 3px solid $light-grey;\n}\n\n.preview-row:hover a {\n  border: 3px solid #E1D4F9;\n}\n\n.preview-row.green a {\n  border: 3px solid $light-green;\n}\n\n.preview-row.red a {\n  border: 3px solid $dark-red;\n}\n\n.preview-row.selected a {\n  border: 3px solid #8F91EB;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreviewRow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreviewRow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PreviewRow.vue?vue&type=template&id=15179c2b&scoped=true&\"\nimport script from \"./PreviewRow.vue?vue&type=script&lang=js&\"\nexport * from \"./PreviewRow.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PreviewRow.vue?vue&type=style&index=0&id=15179c2b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"15179c2b\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"fixed-page columns\">\n  <div class=\"page column main-column\">\n    <div class=\"page-header\">\n      <div\n        class=\"flexrow header-title\"\n        v-if=\"currentTask\"\n      >\n        <router-link\n          :to=\"entityPage\"\n          class=\"flexrow-item has-text-centered back-link\"\n        >\n          <chevron-left-icon />\n        </router-link>\n        <div class=\"title flexrow-item\">\n          <router-link :to=\"taskEntityPath\">\n            {{ currentTask ? title : 'Loading...'}}\n          </router-link>\n        </div>\n        <task-type-name\n          class=\"flexrow-item task-type\"\n          :task-type=\"currentTaskType\"\n          :production-id=\"currentProduction.id\"\n          v-if=\"currentTaskType\"\n        />\n        <subscribe-button\n          class=\"flexrow-item action-button\"\n          :subscribed=\"isAssigned || isSubscribed\"\n          @click=\"toggleSubscribe\"\n          v-if=\"!isAssigned\"\n        />\n      </div>\n\n      <div\n        class=\"flexrow task-information\"\n        v-if=\"currentTask\"\n      >\n        <span class=\"flexrow-item\">{{ $t('tasks.current_status') }}</span>\n        <validation-tag\n          class=\"is-medium flexrow-item\"\n          :task=\"currentTask\"\n          :is-static=\"true\"\n          v-if=\"currentTask\"\n        />\n        <span class=\"flexrow-item\">{{ $t('tasks.fields.assignees') }}:</span>\n        <span\n          class=\"flexrow-item avatar-wrapper\"\n          :key=\"personId\"\n          v-for=\"personId in currentTask.assignees\"\n        >\n          <people-avatar\n            class=\"flexrow-item\"\n            :key=\"personId\"\n            :person=\"personMap.get(personId)\"\n            :size=\"30\"\n            :font-size=\"16\"\n          />\n       </span>\n      </div>\n    </div>\n\n    <div class=\"task-columns\" ref=\"task-columns\">\n      <div class=\"task-column comments-column\">\n        <div v-if=\"currentTask\">\n          <div>\n            <add-comment\n              ref=\"add-comment\"\n              :is-error=\"errors.addComment\"\n              :is-loading=\"loading.addComment\"\n              :is-movie=\"isMovie\"\n              :user=\"user\"\n              :team=\"currentTeam\"\n              :task=\"currentTask\"\n              :task-status=\"taskStatusForCurrentUser\"\n              :attached-file-name=\"attachedFileName\"\n              :fps=\"parseInt(currentFps)\"\n              :time=\"currentTime\"\n              :revision=\"currentRevision\"\n              @add-comment=\"addComment\"\n              @add-preview=\"onAddPreviewClicked\"\n              @duplicate-comment=\"onDuplicateComment\"\n              @file-drop=\"selectFile\"\n              @annotation-snapshots-requested=\"extractAnnotationSnapshots\"\n              v-if=\"isCommentingAllowed\"\n            />\n            <div\n              class=\"comments\"\n              v-if=\"currentTaskComments && currentTaskComments.length > 0\"\n            >\n              <comment\n                :comment=\"comment\"\n                :task=\"currentTask\"\n                :highlighted=\"false\"\n                :key=\"comment.id\"\n                :current-user=\"user\"\n                :editable=\"(\n                  comment.person && user.id === comment.person.id ||\n                  isCurrentUserAdmin\n                )\"\n                :is-first=\"index === 0\"\n                :is-last=\"index === pinnedCount\"\n                :is-change=\"isStatusChange(index)\"\n                @ack-comment=\"ackComment\"\n                @pin-comment=\"onPinComment\"\n                @edit-comment=\"onEditComment\"\n                @delete-comment=\"onDeleteComment\"\n                @checklist-updated=\"saveComment\"\n                @time-code-clicked=\"timeCodeClicked\"\n                v-for=\"(comment, index) in currentTaskComments\"\n              />\n            </div>\n            <div class=\"no-comment\" v-else>\n              <em>\n                {{ $t('tasks.no_comment')}}\n              </em>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"has-text-centered\" v-else>\n          <spinner />\n        </div>\n      </div>\n\n      <div class=\"task-column preview-column\">\n        <div class=\"preview-column-content\">\n          <div class=\"flexrow preview-header\">\n            <h2 class=\"subtitle flexrow-item\">\n              {{ $t('tasks.preview') }}\n            </h2>\n            <div\n              class=\"set-main-preview flexrow-item flexrow pull-right\"\n              v-if=\"isPreviewButtonVisible\"\n            >\n              <button\n                :class=\"{\n                  button: true,\n                  'flexrow-item': true,\n                  'is-loading': loading.setPreview\n                }\"\n                @click=\"setPreview\"\n                v-if=\"isPreviews && isCurrentUserManager\"\n              >\n                <image-icon class=\"icon\" />\n                <span class=\"text\">\n                  {{ $t('tasks.set_preview') }}\n                </span>\n              </button>\n              <span class=\"error flexrow-item\" v-if=\"errors.setPreview\">\n                {{ $t('tasks.set_preview_error') }}\n              </span>\n            </div>\n            <div\n              class=\"set-main-preview flexrow-item pull-right\"\n              v-if=\"currentTask && currentTask.entity && currentTask.entity.preview_file_id === currentPreviewId\">\n              <em>{{ $t('tasks.set_preview_done') }}</em>\n            </div>\n          </div>\n\n          <div\n            class=\"preview-list mt2\"\n            v-if=\"isPreviews\"\n          >\n            <preview-row\n              :key=\"preview.id\"\n              :preview=\"preview\"\n              :preview-path=\"previewPath(preview.id)\"\n              :taskId=\"currentTask ? currentTask.id : ''\"\n              :selected=\"preview.id === currentPreviewId\"\n              v-for=\"preview in currentTaskPreviews\"\n            />\n          </div>\n          <div v-else>\n            <em>\n              {{ $t('tasks.no_preview')}}\n            </em>\n          </div>\n\n          <div class=\"preview-area\">\n            <div\n              v-if=\"isPreviews\"\n            >\n              <preview-player\n                :previews=\"currentPreview.previews\"\n                :task-type-map=\"taskTypeMap\"\n                :entity-preview-files=\"taskEntityPreviews\"\n                :read-only=\"isCurrentUserArtist\"\n                :last-preview-files=\"lastFivePreviews\"\n                :task=\"currentTask\"\n                @annotation-changed=\"onAnnotationChanged\"\n                @add-extra-preview=\"onAddExtraPreviewClicked\"\n                @remove-extra-preview=\"onRemoveExtraPreviewClicked\"\n                @change-current-preview=\"changeCurrentPreview\"\n                @time-updated=\"onTimeUpdated\"\n                ref=\"preview-player\"\n                v-if=\"currentPreview\"\n              />\n            </div>\n          </div>\n        </div>\n        <div class=\"flexrow-item task-information\">\n          <page-subtitle :text=\"$t('main.info')\" />\n          <div class=\"table-body mt1\">\n            <table class=\"datatable\" v-if=\"currentTask\">\n              <tbody class=\"table-body\">\n                <tr class=\"datatable-row\">\n                  <td class=\"field-label\">{{ $t('tasks.fields.estimation') }}</td>\n                  <td>{{ currentTask.estimation }}</td>\n                </tr>\n                <tr class=\"datatable-row\">\n                  <td class=\"field-label\">{{ $t('tasks.fields.duration') }}</td>\n                  <td>{{ formatDuration(currentTask.duration) }}</td>\n                </tr>\n                <tr class=\"datatable-row\">\n                  <td class=\"field-label\">{{ $t('tasks.fields.retake_count') }}</td>\n                  <td>{{ currentTask.retake_count }}</td>\n                </tr>\n                <tr class=\"datatable-row\">\n                  <td class=\"field-label\">{{ $t('tasks.fields.start_date') }}</td>\n                  <td>{{ formatSimpleDate(currentTask.start_date) }}</td>\n                </tr>\n                <tr class=\"datatable-row\">\n                  <td class=\"field-label\">{{ $t('tasks.fields.due_date') }}</td>\n                  <td>{{ formatSimpleDate(currentTask.due_date) }}</td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n        <div class=\"pa2\">\n        </div>\n      </div>\n    </div>\n\n    <add-preview-modal\n      ref=\"add-preview-modal\"\n      :active=\"modals.addPreview\"\n      :is-loading=\"loading.addPreview\"\n      :is-error=\"errors.addPreview\"\n      :form-data=\"addPreviewFormData\"\n      @cancel=\"modals.addPreview = false\"\n      @fileselected=\"selectFile\"\n      @confirm=\"closeAddPreviewModal\"\n    />\n\n    <add-preview-modal\n      ref=\"add-extra-preview-modal\"\n      :active=\"modals.addExtraPreview\"\n      :is-loading=\"loading.addExtraPreview\"\n      :is-error=\"errors.addExtraPreview\"\n      :form-data=\"addExtraPreviewFormData\"\n      @cancel=\"hideExtraPreviewModal\"\n      @fileselected=\"selectFile\"\n      @confirm=\"createExtraPreview\"\n    />\n\n    <edit-comment-modal\n      :active=\"modals.editComment\"\n      :is-loading=\"loading.editComment\"\n      :is-error=\"errors.editComment\"\n      :comment-to-edit=\"commentToEdit\"\n      :team=\"currentTeam\"\n      @confirm=\"confirmEditTaskComment\"\n      @cancel=\"onCancelEditComment\"\n    />\n\n    <delete-modal\n      :active=\"modals.deleteComment\"\n      :is-loading=\"loading.deleteComment\"\n      :is-error=\"errors.deleteComment\"\n      :text=\"$t('tasks.delete_comment')\"\n      :error-text=\"$t('tasks.delete_comment_error')\"\n      @confirm=\"confirmDeleteTaskComment\"\n      @cancel=\"onCancelDeleteComment\"\n    />\n\n    <delete-modal\n      :active=\"modals.deleteExtraPreview\"\n      :is-loading=\"loading.deleteExtraPreview\"\n      :is-error=\"errors.deleteExtraPreview\"\n      :text=\"$t('tasks.delete_preview')\"\n      :error-text=\"$t('tasks.delete_preview_error')\"\n      @cancel=\"hideRemoveExtraPreviewModal\"\n      @confirm=\"confirmDeleteTaskPreview\"\n    />\n  </div>\n</div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport {\n  ChevronLeftIcon,\n  ImageIcon\n} from 'vue-feather-icons'\n\nimport { formatListMixin } from '@/components/mixins/format'\n\nimport AddComment from '../widgets/AddComment'\nimport AddPreviewModal from '../modals/AddPreviewModal'\nimport Comment from '../widgets/Comment'\nimport DeleteModal from '../modals/DeleteModal'\nimport EditCommentModal from '../modals/EditCommentModal'\nimport PageSubtitle from '../widgets/PageSubtitle'\nimport PeopleAvatar from '../widgets/PeopleAvatar'\nimport PreviewRow from '../widgets/PreviewRow'\nimport Spinner from '../widgets/Spinner'\nimport SubscribeButton from '../widgets/SubscribeButton'\nimport TaskTypeName from '../widgets/TaskTypeName'\nimport ValidationTag from '../widgets/ValidationTag'\nimport PreviewPlayer from '../previews/PreviewPlayer'\n\nexport default {\n  name: 'task',\n  mixins: [formatListMixin],\n  components: {\n    AddComment,\n    AddPreviewModal,\n    Comment,\n    ChevronLeftIcon,\n    DeleteModal,\n    EditCommentModal,\n    ImageIcon,\n    PageSubtitle,\n    PeopleAvatar,\n    PreviewRow,\n    PreviewPlayer,\n    Spinner,\n    SubscribeButton,\n    TaskTypeName,\n    ValidationTag\n  },\n\n  data () {\n    return {\n      attachedFileName: '',\n      currentTime: 0,\n      entityPage: this.getEntityPage(),\n      selectedTab: 'validation',\n      taskLoading: {\n        isLoading: true,\n        isError: false\n      },\n      modals: {\n        addPreview: false,\n        addExtraPreview: false,\n        deleteExtraPreview: false,\n        deleteTask: false,\n        deleteComment: false,\n        editComment: false\n      },\n      loading: {\n        addComment: false,\n        addPreview: false,\n        addExtraPreview: false,\n        setPreview: false,\n        deleteTask: false,\n        deleteComment: false,\n        editComment: false\n      },\n      errors: {\n        addComment: false,\n        addPreview: false,\n        addExtraPreview: false,\n        setPreview: false,\n        deleteTask: false,\n        deleteComment: false,\n        editComment: false\n      },\n      currentTask: null,\n      currentTaskComments: [],\n      currentTaskPreviews: [],\n      commentToEdit: null,\n      addPreviewFormData: null,\n      addExtraPreviewFormData: null,\n      isSubscribed: false\n    }\n  },\n\n  created () {\n    this.clearSelectedTasks()\n    this.loadTaskData()\n  },\n\n  mounted () {\n    this.reset()\n    this.$nextTick(() => {\n      if (this.$refs['task-columns']) {\n        this.$refs['task-columns'].scrollTop = 100\n        window.scrollTo(0, 0)\n      }\n    })\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentEpisode',\n      'currentProduction',\n      'displayedShots',\n      'displayedAssets',\n      'getTaskComments',\n      'getTaskPreviews',\n      'getTaskComment',\n      'isCurrentUserAdmin',\n      'isCurrentUserArtist',\n      'isCurrentUserClient',\n      'isCurrentUserManager',\n      'isSingleEpisode',\n      'isTVShow',\n      'personMap',\n      'productionMap',\n      'route',\n      'taskEntityPreviews',\n      'taskStatus',\n      'taskStatusForCurrentUser',\n      'taskMap',\n      'taskTypeMap',\n      'user'\n    ]),\n\n    isPreviewButtonVisible () {\n      return (\n        this.isCurrentUserManager &&\n        this.currentTask &&\n        this.currentTask.entity &&\n        this.currentTask.entity.preview_file_id !== this.currentPreviewId &&\n        ['png', 'mp4'].includes(this.extension)\n      )\n    },\n\n    isMovie () {\n      return this.extension === 'mp4'\n    },\n\n    extension () {\n      return this.currentPreview ? this.currentPreview.extension : ''\n    },\n\n    currentPreviewId () {\n      return this.currentPreview ? this.currentPreview.id : ''\n    },\n\n    currentPreview () {\n      if (this.isPreviews) {\n        let currentPreview = this.currentTaskPreviews[0]\n        const previewId = this.route.params.preview_id\n        if (previewId) {\n          currentPreview = this.currentTaskPreviews.find((preview) => {\n            return preview.id === previewId\n          })\n        }\n        return currentPreview\n      } else {\n        return null\n      }\n    },\n\n    currentFps () {\n      return this.productionMap.get(this.currentTask.project_id).fps || '25'\n    },\n\n    currentRevision () {\n      return this.currentPreview ? this.currentPreview.revision : 0\n    },\n\n    isCommentingAllowed () {\n      return (\n        this.isCurrentUserManager ||\n        this.isCurrentUserClient ||\n        this.currentTask.assignees.find(\n          (personId) => personId === this.user.id\n        )\n      )\n    },\n\n    taskTypeBorder () {\n      let border = 'transparent'\n      if (this.currentTask) border = this.currentTask.task_type_color\n      return {\n        'border-left': `4px solid ${border}`\n      }\n    },\n\n    deleteTaskPath () {\n      return this.taskPath(this.currentTask, 'task-delete')\n    },\n\n    isPreviews () {\n      return this.currentTaskPreviews && this.currentTaskPreviews.length > 0\n    },\n\n    taskEntityPath () {\n      if (this.currentTask) {\n        const type = this.currentTask.entity_type_name\n        let entityId = ''\n        if (this.currentTask.entity) {\n          entityId = this.currentTask.entity.id\n        } else {\n          entityId = this.currentTask.entity_id\n        }\n\n        const route = {\n          name: type === 'Shot' ? 'shot' : 'asset',\n          params: {\n            production_id: this.currentTask.project_id\n          }\n        }\n\n        if (type === 'Shot') {\n          route.params.shot_id = entityId\n        } else {\n          route.params.asset_id = entityId\n        }\n\n        if (this.$route.params.episode_id) {\n          route.name = `episode-${route.name}`\n          route.params.episode_id = this.$route.params.episode_id\n        }\n\n        return route\n      } else {\n        return {\n          name: 'open-productions'\n        }\n      }\n    },\n\n    lastFivePreviews () {\n      if (this.currentTaskPreviews) {\n        return this.currentTaskPreviews.slice(0, 5)\n      } else {\n        return []\n      }\n    },\n\n    entityList () {\n      const entity = this.displayedShots.find((entity) => {\n        return entity.id === this.currentTask.entity_id\n      })\n      if (entity) {\n        return this.displayedShots\n      } else {\n        return this.displayedAssets\n      }\n    },\n\n    previousEntity () {\n      if (this.currentTask) {\n        const taskTypeId = this.currentTask.task_type_id\n        const entityIndex = this.entityList.findIndex((entity) => {\n          return entity.id === this.currentTask.entity_id\n        })\n        let firstTraversal = false\n\n        let previousEntityIndex = entityIndex - 1\n        if (previousEntityIndex < 0) {\n          previousEntityIndex = this.entityList.length - 1\n        }\n\n        let taskId = null\n        while (!taskId) {\n          if (this.entityList[previousEntityIndex]) {\n            const entity = this.entityList[previousEntityIndex]\n            taskId = entity.tasks.find((ctaskId) => {\n              const task = this.taskMap.get(taskId)\n              if (task) {\n                return task.task_type_id === taskTypeId\n              } else {\n                return false\n              }\n            })\n          } else {\n            taskId = this.currentTask.id\n          }\n\n          if (!taskId) {\n            previousEntityIndex--\n            if (previousEntityIndex < 0) {\n              previousEntityIndex = this.entityList.length\n              if (firstTraversal) {\n                return null\n              }\n              firstTraversal = true\n            }\n          }\n        }\n\n        return this.taskPath({ id: taskId })\n      } else {\n        return {\n          name: 'open-productions'\n        }\n      }\n    },\n\n    nextEntity () {\n      if (this.currentTask) {\n        const taskTypeId = this.currentTask.task_type_id\n        let firstTraversal = false\n        const entityIndex = this.entityList.findIndex((entity) => {\n          return entity.id === this.currentTask.entity_id\n        })\n\n        let nextEntityIndex = entityIndex + 1\n        if (nextEntityIndex >= this.entityList.length) {\n          nextEntityIndex = 0\n        }\n\n        let taskId = null\n        while (!taskId) {\n          if (this.entityList[nextEntityIndex]) {\n            const entity = this.entityList[nextEntityIndex]\n            taskId = entity.tasks.find((ctaskId) => {\n              const task = this.taskMap.get(taskId)\n              if (task) {\n                return task.task_type_id === taskTypeId\n              } else {\n                return false\n              }\n            })\n          } else {\n            taskId = this.currentTask.id\n          }\n\n          if (!taskId) {\n            nextEntityIndex++\n            if (nextEntityIndex >= this.entityList.length) {\n              nextEntityIndex = 0\n\n              if (firstTraversal) {\n                return null\n              }\n              firstTraversal = true\n            }\n          }\n        }\n\n        return this.taskPath({ id: taskId })\n      } else {\n        return {\n          name: 'open-productions'\n        }\n      }\n    },\n\n    previewPlayer () {\n      return this.$refs['preview-player']\n    },\n\n    title () {\n      if (this.currentTask) {\n        const type = this.currentTask.entity_type_name\n        let entityName =\n          this.currentTask.full_entity_name || this.currentTask.entity_name\n        if (this.isTVShow && type === 'Shot') {\n          entityName = entityName\n            .split('/')\n            .splice(1)\n            .join('/')\n        }\n        return `${entityName}`\n      } else {\n        return 'Loading...'\n      }\n    },\n\n    windowTitle () {\n      if (this.currentTask) {\n        const taskTypeName = this.currentTask.task_type_name\n        return `${this.title} / ${taskTypeName}`\n      } else {\n        return 'Loading...'\n      }\n    },\n\n    deleteText () {\n      if (this.currentTask) {\n        const taskType = this.taskTypeMap.get(this.currentTask.task_type_id)\n        return this.$t('main.delete_text', {\n          name: `${this.currentTask.entity_name} / ${taskType.name}`\n        })\n      } else {\n        return ''\n      }\n    },\n\n    isAssigned () {\n      if (this.currentTask) {\n        return this.currentTask.assignees.some((assigneeId) => {\n          return assigneeId === this.user.id\n        })\n      } else {\n        return false\n      }\n    },\n\n    currentTaskType () {\n      if (this.currentTask) {\n        return this.taskTypeMap.get(this.currentTask.task_type_id)\n      } else {\n        return null\n      }\n    },\n\n    currentTeam () {\n      return this.currentProduction.team.map(id => this.personMap.get(id))\n    },\n\n    pinnedCount () {\n      return this.currentTaskComments.filter(c => c.pinned).length\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'ackComment',\n      'addCommentPreview',\n      'addCommentExtraPreview',\n      'commentTask',\n      'commentTaskWithPreview',\n      'changeCommentPreview',\n      'clearSelectedTasks',\n      'deleteTask',\n      'deleteTaskPreview',\n      'deleteTaskComment',\n      'editTaskComment',\n      'loadEpisodes',\n      'loadTask',\n      'loadShots',\n      'loadAssets',\n      'loadPreviewFileFormData',\n      'loadTaskComments',\n      'loadTaskSubscribed',\n      'refreshComment',\n      'refreshPreview',\n      'pinComment',\n      'subscribeToTask',\n      'setCurrentEpisode',\n      'unsubscribeFromTask',\n      'updatePreviewAnnotation'\n    ]),\n\n    getEntityPage () {\n      if (this.currentTask) {\n        const route = {\n          name: this.$route.params.type,\n          params: { production_id: this.currentTask.project_id }\n        }\n\n        if (route.name === 'asset') {\n          route.params.asset_id = this.currentTask.entity_id\n        } else {\n          route.params.shot_id = this.currentTask.entity_id\n        }\n\n        if (this.isTVShow) {\n          route.name = `episode-${route.name}`\n          route.params.episode_id =\n            this.currentEpisode ? this.currentEpisode.id : this.$route.params.episode_id\n        }\n        route.query = { search: '' }\n        return route\n      } else {\n        return {\n          name: 'open-productions'\n        }\n      }\n    },\n\n    loadTaskData () {\n      const task = this.getCurrentTask()\n      if (!task) {\n        this.taskLoading = { isLoading: true, isError: false }\n        this.loadTask({ taskId: this.route.params.task_id })\n          .then(task => {\n            let loadingFunction = (callback) => {\n              this.loadAssets()\n                .then(callback)\n            }\n\n            if (task.entity_type_name === 'Shot') {\n              loadingFunction = (callback) => {\n                this.loadEpisodes()\n                  .then(() => {\n                    if (this.isTVShow) {\n                      this.setCurrentEpisode(task.episode.id)\n                    }\n                    this.loadShots(callback)\n                  })\n                  .catch(callback)\n              }\n            }\n            loadingFunction(() => {\n              this.currentTask = task\n              this.loadTaskComments({\n                taskId: task.id,\n                entityId: task.entity_id\n              })\n                .then(() => this.loadTaskSubscribed({ taskId: task.id }))\n                .then((subscribed) => {\n                  this.isSubscribed = subscribed\n                  this.reset()\n                  this.entityPage = this.getEntityPage()\n                  this.taskLoading = { isLoading: false, isError: false }\n                }).catch((err) => {\n                  console.error(err)\n                  this.taskLoading = { isLoading: false, isError: true }\n                })\n            })\n          })\n      } else {\n        const taskId = this.route.params.task_id\n        this.currentTask = task\n        this.loadTaskComments({ taskId, entityId: task.entity_id })\n          .then(() => this.loadTaskSubscribed({ taskId }))\n          .then(subscribed => {\n            this.isSubscribed = subscribed\n            this.currentTaskComments = this.getCurrentTaskComments()\n            this.currentTaskPreviews = this.getCurrentTaskPreviews()\n            this.entityPage = this.getEntityPage()\n          })\n          .catch(err => {\n            console.error(err)\n            this.taskLoading.isError = true\n          })\n      }\n    },\n\n    getCurrentTask () {\n      return this.taskMap.get(this.route.params.task_id)\n    },\n\n    getCurrentComment () {\n      if (this.route.params.comment_id) {\n        return this.getTaskComment(\n          this.route.params.task_id,\n          this.route.params.comment_id\n        )\n      }\n    },\n\n    getCurrentTaskComments () {\n      return this.getTaskComments(this.route.params.task_id)\n    },\n\n    getCurrentTaskPreviews () {\n      return this.getTaskPreviews(this.route.params.task_id)\n    },\n\n    addComment (comment, attachment, checklist, taskStatusId) {\n      const params = {\n        taskId: this.currentTask.id,\n        taskStatusId: taskStatusId,\n        comment: comment,\n        checklist,\n        attachment\n      }\n      let action = 'commentTask'\n      if (this.attachedFileName) action = 'commentTaskWithPreview'\n      this.loading.addComment = true\n      this.errors.addComment = false\n      this.$store.dispatch(action, params)\n        .then(() => {\n          this.currentTaskPreviews = this.getCurrentTaskPreviews()\n          this.resetPreview()\n          this.$refs['add-preview-modal'].reset()\n          this.reset()\n          this.attachedFileName = ''\n          this.loading.addComment = false\n        })\n        .catch((err) => {\n          console.error(err)\n          this.errors.addComment = true\n          this.loading.addComment = false\n        })\n    },\n\n    reset () {\n      this.currentTaskComments = this.getCurrentTaskComments()\n      this.currentTaskPreviews = this.getCurrentTaskPreviews()\n      this.currentTask = this.getCurrentTask()\n    },\n\n    selectFile (forms) {\n      this.loadPreviewFileFormData(forms)\n      this.attachedFileName = forms\n        .map((form) => form.get('file').name)\n        .join(', ')\n    },\n\n    isHighlighted (comment) {\n      return comment.preview && comment.preview.id === this.currentPreviewId\n    },\n\n    createExtraPreview () {\n      const previews = this.currentTaskPreviews\n      const preview = previews.length > 0 ? previews[0] : null\n      this.errors.addExtraPreview = false\n      this.loading.addExtraPreview = true\n      const comment = this.getCurrentTaskComments().find((comment) => {\n        return comment.previews.findIndex((p) => p.id === preview.id) >= 0\n      })\n      this.addCommentExtraPreview({\n        taskId: this.currentTask.id,\n        previewId: this.currentPreview.id,\n        commentId: comment.id\n      })\n        .then(() => {\n          this.loading.addExtraPreview = false\n          this.modals.addExtraPreview = false\n          this.$refs['add-extra-preview-modal'].reset()\n          setTimeout(() => {\n            this.previewPlayer.displayLast()\n          }, 0)\n        })\n        .catch((err) => {\n          console.error(err)\n          this.errors.addExtraPreview = true\n          this.loading.addExtraPreview = false\n        })\n    },\n\n    resetPreview (changeRoute = true) {\n      const previews = this.currentTaskPreviews\n      const preview = previews.length > 0 ? previews[0] : null\n      this.currentTaskComments = this.getCurrentTaskComments()\n      this.currentTaskPreviews = this.getCurrentTaskPreviews()\n      if (preview && changeRoute) {\n        this.$router.push(this.previewPath(preview.id))\n      }\n    },\n\n    setPreview () {\n      this.loading.setPreview = true\n      this.errors.setPreview = false\n      this.$store.dispatch('setPreview', {\n        taskId: this.currentTask.id,\n        entityId: this.currentTask.entity.id,\n        previewId: this.currentPreviewId\n      })\n        .then(() => {\n          this.loading.setPreview = false\n        })\n        .catch((err) => {\n          console.error(err)\n          this.errors.setPreview = true\n        })\n    },\n\n    confirmEditTaskComment (comment) {\n      this.loading.editComment = true\n      this.errors.editComment = false\n      this.editTaskComment({\n        taskId: this.currentTask.id,\n        comment\n      })\n        .then(() => {\n          this.loading.editComment = false\n          this.modals.editComment = false\n        })\n        .catch(err => {\n          console.error(err)\n          this.errors.editComment = true\n        })\n    },\n\n    saveComment (comment, checklist) {\n      this.editTaskComment({\n        taskId: this.currentTask.id,\n        comment,\n        checklist\n      })\n    },\n\n    confirmDeleteTaskComment () {\n      this.loading.deleteComment = true\n      this.errors.deleteComment = false\n      const commentId = this.commentToEdit.id\n\n      this.deleteTaskComment({\n        taskId: this.currentTask.id,\n        commentId\n      })\n        .then(() => {\n          this.loading.deleteComment = false\n          this.reset()\n          if (this.isPreviews) this.resetPreview()\n          this.modals.deleteComment = false\n        })\n        .catch(err => {\n          console.error(err)\n          this.loading.deleteComment = false\n          this.errors.deleteComment = true\n        })\n    },\n\n    confirmDeleteTaskPreview () {\n      this.loading.deleteExtraPreview = true\n      this.errors.deleteExtraPreview = false\n      const previewId = this.currentPreviewId\n      const comment = this.getCurrentTaskComments().find((comment) => {\n        return comment.previews.findIndex((p) => p.id === previewId) >= 0\n      })\n\n      this.previewPlayer.displayFirst()\n      this.deleteTaskPreview({\n        taskId: this.currentTask.id,\n        commentId: comment.id,\n        previewId: this.currentExtraPreviewId\n      })\n        .then(() => {\n          this.loading.deleteExtraPreview = false\n          this.resetPreview()\n          this.hideRemoveExtraPreviewModal()\n        })\n        .catch((err) => {\n          console.error(err)\n          this.loading.deleteExtraPreview = false\n          this.errors.deleteExtraPreview = true\n        })\n    },\n\n    onPreviewAdded (eventData) {\n      const taskId = eventData.task_id\n      const commentId = eventData.comment_id\n      const previewId = eventData.preview_file_id\n      const revision = eventData.revision\n      const extension = eventData.extension\n      const comment = this.$store.getters.getTaskComment(taskId, commentId)\n\n      if (\n        this.currentTask &&\n        comment &&\n        (\n          comment.previews.length === 0 ||\n          comment.previews[0].id !== previewId\n        ) &&\n        taskId === this.currentTask.id\n      ) {\n        this.$store.commit('ADD_PREVIEW_END', {\n          preview: {\n            id: previewId,\n            revision,\n            extension: extension\n          },\n          taskId,\n          commentId,\n          comment\n        })\n        this.resetPreview()\n      }\n    },\n\n    toggleSubscribe () {\n      if (this.currentTask && !this.isAssigned) {\n        if (this.isSubscribed) {\n          this.unsubscribeFromTask(this.currentTask.id)\n          this.isSubscribed = false\n        } else {\n          this.subscribeToTask(this.currentTask.id)\n          this.isSubscribed = true\n        }\n      }\n    },\n\n    taskPath (task, section = 'task') {\n      if (!task) {\n        task = this.currentTask\n      } else {\n        task.project_id = this.currentTask.project_id\n        task.episode_id = this.currentTask.episode_id\n      }\n\n      let route = { name: 'open-productions' }\n      if (task) {\n        route = {\n          name: section,\n          params: {\n            production_id: task.project_id,\n            task_id: task.id\n          }\n        }\n\n        if (this.isTVShow && this.currentEpisode) {\n          route.name = `episode-${section}`\n          route.params.episode_id = task.episode_id || this.currentEpisode.id\n        }\n      }\n      return route\n    },\n\n    previewPath (previewId) {\n      const route = this.taskPath(this.currentTask, 'task-preview')\n\n      if (route.params) {\n        route.params.preview_id = previewId\n      }\n      return route\n    },\n\n    onAnnotationChanged ({ preview, additions, deletions, updates }) {\n      const taskId = this.currentTask.id\n      this.updatePreviewAnnotation({\n        taskId, preview, additions, deletions, updates\n      })\n    },\n\n    onAddExtraPreviewClicked () {\n      this.modals.addExtraPreview = true\n    },\n\n    onRemoveExtraPreviewClicked (preview) {\n      this.showRemoveExtraPreviewModal(preview)\n    },\n\n    hideExtraPreviewModal () {\n      this.modals.addExtraPreview = false\n    },\n\n    showRemoveExtraPreviewModal (preview) {\n      this.currentExtraPreviewId = preview.id\n      this.modals.deleteExtraPreview = true\n    },\n\n    hideRemoveExtraPreviewModal () {\n      this.modals.deleteExtraPreview = false\n    },\n\n    onAddPreviewClicked () {\n      this.modals.addPreview = true\n    },\n\n    closeAddPreviewModal () {\n      this.modals.addPreview = false\n    },\n\n    onDuplicateComment (comment) {\n      this.$refs['add-comment'].setValue(comment)\n    },\n\n    onPinComment (comment) {\n      this.pinComment(comment)\n    },\n\n    onEditComment (comment) {\n      this.commentToEdit = comment\n      this.modals.editComment = true\n    },\n\n    onDeleteComment (comment) {\n      this.commentToEdit = comment\n      this.modals.deleteComment = true\n    },\n\n    onCancelEditComment (comment) {\n      this.modals.editComment = false\n    },\n\n    onCancelDeleteComment (comment) {\n      this.modals.deleteComment = false\n    },\n\n    onTimeUpdated (time) {\n      this.currentTime = time\n    },\n\n    changeCurrentPreview (preview) {\n      this.$router.push(this.previewPath(preview.id))\n    },\n\n    onRemoteAcknowledge (eventData, type) {\n      if (this.currentTask) {\n        const comment = this.currentTaskComments.find(\n          c => c.id === eventData.comment_id\n        )\n        const user = this.personMap.get(eventData.person_id)\n        if (comment && user) {\n          if (this.user.id === user.id) {\n            if (\n              (\n                type === 'ack' &&\n                !comment.acknowledgements.includes(user.id)\n              ) ||\n              (\n                type === 'unack' &&\n                comment.acknowledgements.includes(user.id)\n              )\n            ) {\n              this.$store.commit('ACK_COMMENT', { comment, user })\n            }\n          } else {\n            this.$store.commit('ACK_COMMENT', { comment, user })\n          }\n        }\n      }\n    },\n\n    isStatusChange (index) {\n      const comments = this.currentTaskComments\n      const comment = comments[index]\n      return (\n        index === comments.length - 1 ||\n        comment.task_status_id !== comments[index + 1].task_status_id\n      )\n    },\n\n    timeCodeClicked (\n      { versionRevision, minutes, seconds, milliseconds, frame }\n    ) {\n      this.changeCurrentPreview(this.currentTaskPreviews.find(\n        p => p.revision === parseInt(versionRevision)\n      ))\n      setTimeout(() => {\n        this.previewPlayer.setCurrentFrame(frame - 1)\n        this.previewPlayer.focus()\n      }, 20)\n    },\n\n    async extractAnnotationSnapshots () {\n      this.$refs['add-comment'].showAnnotationLoading()\n      const files = await this.previewPlayer.extractAnnotationSnapshots()\n      this.$refs['add-comment'].setAnnotationSnapshots(files)\n      this.$refs['add-comment'].hideAnnotationLoading()\n      return files\n    }\n  },\n\n  watch: {\n    $route () {\n      if (this.$route.params.task_id !== this.currentTask.id) {\n        this.loadTaskData()\n      }\n    }\n  },\n\n  socket: {\n    events: {\n      'preview-file:add-file' (eventData) {\n        this.onPreviewAdded(eventData)\n      },\n\n      'comment:acknowledge' (eventData) {\n        this.onRemoteAcknowledge(eventData, 'ack')\n      },\n\n      'comment:unacknowledge' (eventData) {\n        this.onRemoteAcknowledge(eventData, 'unack')\n      },\n\n      'preview-file:update' (eventData) {\n        const comment = this.currentTaskComments.find(\n          c => (\n            c.previews &&\n            c.previews.length > 0 &&\n            c.previews[0].id === eventData.preview_file_id\n          )\n        )\n        if (comment && this.currentTask) {\n          this.refreshPreview({\n            taskId: this.currentTask.id,\n            previewId: eventData.preview_file_id\n          }).then(preview => {\n            comment.previews[0].validation_status = preview.validation_status\n          })\n        }\n      },\n\n      'comment:new' (eventData) {\n        setTimeout(() => {\n          if (\n            this.getCurrentTaskComments().length !==\n            this.currentTaskComments.length\n          ) {\n            this.currentTaskComments = this.getCurrentTaskComments()\n            this.currentTaskPreviews = this.getCurrentTaskPreviews()\n          }\n        }, 1000)\n      },\n\n      'comment:reply' (eventData) {\n        if (this.currentTask) {\n          const comment = this.currentTaskComments.find(\n            c => c.id === eventData.comment_id\n          )\n          if (comment) {\n            if (!comment.replies) comment.replies = []\n            const reply = comment.replies.find(\n              r => r.id === eventData.reply_id\n            )\n            if (!reply) {\n              this.refreshComment({\n                taskId: this.currentTask.id,\n                commentId: eventData.comment_id\n              })\n                .then(remoteComment => {\n                  comment.replies = remoteComment.replies\n                })\n                .catch(console.error)\n            }\n          }\n        }\n      },\n\n      'comment:delete-reply' (eventData) {\n        if (this.currentTask) {\n          const comment = this.currentTaskComments.find(\n            c => c.id === eventData.comment_id\n          )\n          if (comment) {\n            if (!comment.replies) comment.replies = []\n            this.$store.commit('REMOVE_REPLY_FROM_COMMENT', {\n              comment,\n              reply: { id: eventData.reply_id }\n            })\n          }\n        }\n      }\n    }\n  },\n\n  metaInfo () {\n    let title = 'Loading task... - Kitsu'\n    if (this.currentTask) {\n      const taskTypeName =\n        this.taskTypeMap.get(this.currentTask.task_type_id).name\n      title = `${this.title} / ${taskTypeName} - Kitsu`\n    }\n    return { title }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark .page-header,\n.dark .task-information,\n.dark .add-comment,\n.dark .comment,\n.dark .no-comment,\n.dark .preview-column-content,\n.dark .column {\n  background: #46494F;\n  border-color: $dark-grey;\n  box-shadow: 0px 0px 6px #333;\n}\n\nh2.subtitle {\n  margin: 0;\n  padding: 0;\n}\n\n.page {\n  background: #F9F9F9;\n  margin-top: 60px;\n  padding: 0;\n}\n\n.page.column {\n  background: var(--background-page);\n  padding-bottom: 1em;\n}\n\n.task-information {\n  background: white;\n  box-shadow: 0px 0px 6px #E0E0E0;\n  margin-top: 1em;\n  margin-right: 0;\n  padding: 1em;\n}\n\n.page-header {\n  padding: 1em;\n  margin-top: 1em;\n  background: white;\n  box-shadow: 0px 0px 6px #E0E0E0;\n  margin: 2em 1em 0 1em;\n}\n\n.navigation-buttons {\n  font-size: 1em;\n  margin-top: 0.5em;\n  margin-bottom: 0.5em;\n}\n\n.navigation-buttons .arrow {\n  font-size: 1.2em;\n  font-weight: bold;\n}\n\n.navigation-buttons a {\n  color: $grey;\n}\n\n.task-information {\n  margin-top: 1em;\n}\n\n.selected {\n  border: 0;\n}\n\n.source {\n  color: #AAA;\n  font-size: 0.8em;\n}\n\nvideo {\n  width: 100%;\n}\n\n.validation-buttons button {\n  width: 100%;\n  margin-bottom: 0.3em;\n  border-width: 2px;\n  font-weight: bold;\n}\n\n.preview-row {\n  margin-bottom: 0.5em;\n}\n\n.add-comment {\n  margin-bottom: 1em;\n  padding: 1em;\n  box-shadow: 0px 0px 6px #E0E0E0;\n}\n\n.no-comment {\n  background: white;\n  box-shadow: 0px 0px 6px #E0E0E0;\n  padding: 1em;\n  border-radius: 5px;\n}\n\n.comment {\n  box-shadow: 0px 0px 6px #E0E0E0;\n  margin-top: 0.3em;\n}\n\n.task-columns {\n  display: flex;\n  flex: 1;\n  flex-direction: row;\n}\n\n.task-column {\n  width: 50%;\n  padding: 1em;\n}\n\n.preview-column {\n  overflow: auto;\n}\n\n.preview-column-content {\n  background: white;\n  box-shadow: 0px 0px 6px #E0E0E0;\n  padding: 1em;\n  border-radius: 5px;\n  overflow-x: hidden;\n}\n\n.preview-list {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.page-header .tag {\n  border-radius: 0;\n  font-weight: bold;\n  margin-right: 0.5em;\n}\n\n.assignees {\n  display: flex;\n}\n\n.assignees span {\n  margin-right: 0.2em;\n}\n\n.avatar-wrapper {\n  margin-right: 0.5em;\n}\n\n.entity-thumbnail {\n  width: 50px;\n  margin-right: 0.3em;\n}\n\n.title {\n  margin: 0;\n  flex: 1;\n}\n\n.pull-right {\n  margin-left: auto;\n}\n\n.title a {\n  color: inherit;\n}\n\n.set-main-preview {\n  height: 30px;\n}\n\n.back-link {\n  padding-top: 6px;\n}\n\n.main-column {\n  display: flex;\n  flex-direction: column;\n  max-height: calc(100% - 60px);\n}\n\n.task-columns {\n  display: flex;\n  max-height: 100%;\n  overflow: hidden;\n}\n\n.task-column {\n  overflow-y: auto;\n}\n\n@media screen and (max-width: 768px) {\n  .action-button {\n    display: none;\n  }\n\n  .title {\n    font-size: 1.3em;\n    line-height: 1.5em;\n  }\n\n  .header-title {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n\n  .header-title .flexrow-item {\n    margin-bottom: 0.5em;\n  }\n\n  .task-columns {\n    flex-direction: column-reverse;\n  }\n\n  .task-column {\n    width: 100%;\n    overflow-y: initial;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Task.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Task.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Task.vue?vue&type=template&id=237b20d8&scoped=true&\"\nimport script from \"./Task.vue?vue&type=script&lang=js&\"\nexport * from \"./Task.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Task.vue?vue&type=style&index=0&id=237b20d8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"237b20d8\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Task.vue?vue&type=style&index=0&id=237b20d8&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('router-link',{staticClass:\"button\",attrs:{\"title\":_vm.title,\"to\":_vm.path}},[(_vm.icon.length > 0 && _vm.icon.startsWith('fa'))?_c('span',{staticClass:\"icon is-small\"},[_c('i',{class:'fa ' + _vm.icon})]):_vm._e(),(_vm.icon === 'plus')?_c('plus-icon',{class:{\n      icon: true,\n      'is-small': true,\n      'only-icon': !_vm.isText\n    }}):_vm._e(),(_vm.icon === 'download')?_c('download-icon',{class:{\n      icon: true,\n      'is-small': true,\n      'only-icon': !_vm.isText\n    }}):_vm._e(),(_vm.icon === 'upload')?_c('upload-icon',{class:{\n      icon: true,\n      'is-small': true,\n      'only-icon': !_vm.isText\n    }}):_vm._e(),(_vm.icon === 'edit')?_c('edit-icon',{class:{\n      icon: true,\n      'is-small': true,\n      'only-icon': !_vm.isText\n    }}):_vm._e(),(_vm.icon === 'delete')?_c('trash-icon',{class:{\n      icon: true,\n      'is-small': true,\n      'only-icon': !_vm.isText\n    }}):_vm._e(),(_vm.icon === 'restore')?_c('rotate-ccw-icon',{class:{\n      icon: true,\n      'is-small': true,\n      'only-icon': !_vm.isText\n    }}):_vm._e(),(_vm.isText)?_c('span',{class:{\n      text: true,\n      'is-hidden-touch': _vm.isResponsive\n    }},[_vm._v(\" \"+_vm._s(_vm.text)+\" \")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<router-link\n  class=\"button\"\n  :title=\"title\"\n  :to=\"path\"\n>\n  <span class=\"icon is-small\" v-if=\"icon.length > 0 && icon.startsWith('fa')\">\n    <i :class=\"'fa ' + icon\"></i>\n  </span>\n  <plus-icon\n    :class=\"{\n      icon: true,\n      'is-small': true,\n      'only-icon': !isText\n    }\" v-if=\"icon === 'plus'\" />\n  <download-icon\n    :class=\"{\n      icon: true,\n      'is-small': true,\n      'only-icon': !isText\n    }\" v-if=\"icon === 'download'\" />\n  <upload-icon\n    :class=\"{\n      icon: true,\n      'is-small': true,\n      'only-icon': !isText\n    }\" v-if=\"icon === 'upload'\" />\n  <edit-icon\n    :class=\"{\n      icon: true,\n      'is-small': true,\n      'only-icon': !isText\n    }\" v-if=\"icon === 'edit'\" />\n  <trash-icon\n    :class=\"{\n      icon: true,\n      'is-small': true,\n      'only-icon': !isText\n    }\" v-if=\"icon === 'delete'\" />\n  <rotate-ccw-icon\n    :class=\"{\n      icon: true,\n      'is-small': true,\n      'only-icon': !isText\n    }\" v-if=\"icon === 'restore'\" />\n\n  <span\n    :class=\"{\n      text: true,\n      'is-hidden-touch': isResponsive\n    }\"\n    v-if=\"isText\"\n  >\n    {{ text }}\n  </span>\n</router-link>\n</template>\n\n<script>\nimport {\n  DownloadIcon,\n  EditIcon,\n  PlusIcon,\n  RotateCcwIcon,\n  TrashIcon,\n  UploadIcon\n} from 'vue-feather-icons'\n\nexport default {\n  name: 'button-link',\n  components: {\n    DownloadIcon,\n    EditIcon,\n    PlusIcon,\n    RotateCcwIcon,\n    TrashIcon,\n    UploadIcon\n  },\n  props: {\n    text: {\n      default: '',\n      type: String\n    },\n    title: {\n      default: '',\n      type: String\n    },\n    path: {\n      default: ''\n    },\n    icon: {\n      default: '',\n      type: String\n    },\n    isResponsive: {\n      default: false,\n      type: Boolean\n    }\n  },\n  computed: {\n    isText () {\n      return this.text && this.text.length > 0\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.button .icon.is-small.only-icon {\n  margin-right: 0;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ButtonLink.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ButtonLink.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ButtonLink.vue?vue&type=template&id=143e1424&scoped=true&\"\nimport script from \"./ButtonLink.vue?vue&type=script&lang=js&\"\nexport * from \"./ButtonLink.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ButtonLink.vue?vue&type=style&index=0&id=143e1424&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"143e1424\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}