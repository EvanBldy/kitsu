(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47b68228"],{"0df4":function(t,e,s){},"1368a":function(t,e,s){},"1e14":function(t,e,s){},"1f23":function(t,e,s){"use strict";s("a711")},"296b":function(t,e,s){"use strict";s("0df4")},"536b":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"datatable-wrapper"},[s("table",{staticClass:"datatable"},[s("thead",{staticClass:"datatable-head"},[s("tr",[s("th",{staticClass:"name",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("status_automations.fields.entity_type"))+" ")]),s("th",{staticClass:"in-task-type",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("status_automations.fields.in_task_type"))+" ")]),s("th",{staticClass:"in-task-status",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("status_automations.fields.in_task_status"))+" ")]),s("th",{staticClass:"automation-type",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("status_automations.fields.out_field_type"))+" ")]),s("th",{staticClass:"out-task-type",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("status_automations.fields.out_task_type"))+" ")]),s("th",{staticClass:"in-task-status",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("status_automations.fields.out_task_status"))+" ")]),s("th",{staticClass:"actions",attrs:{scope:"col"}},[t._v("Â ")])])]),s("tbody",{staticClass:"datatable-body"},t._l(t.entries,(function(e){return s("tr",{key:e.id,staticClass:"datatable-row"},[s("th",{staticClass:"name",attrs:{scope:"row"}},[s("div",{staticClass:"flexrow"},[t.isStatusAutomationDisabled(e)?s("span",{staticClass:"flexrow-item",attrs:{title:t.$t("status_automations.wrong_automation")}},[s("alert-triangle-icon")],1):t._e(),s("span",{staticClass:"flexrow-item"},[t._v(" "+t._s(e.entity_type)+" ")])])]),s("task-type-name",{staticClass:"in-task-type",attrs:{"task-type":t.getTaskType(e.in_task_type_id)}}),s("task-status-name",{staticClass:"in-task-status",attrs:{entry:t.getTaskStatus(e.in_task_status_id)}}),s("td",{staticClass:"input-separator"},[t._v(" "+t._s("ready_for"===e.out_field_type?t.$t("status_automations.change_ready_for"):t.$t("status_automations.change_status"))+" ")]),s("task-type-name",{staticClass:"out-task-type",attrs:{"task-type":t.getTaskType(e.out_task_type_id)}}),"status"===e.out_field_type?s("task-status-name",{staticClass:"out-task-status",attrs:{entry:t.getTaskStatus(e.out_task_status_id)}}):s("td",{staticClass:"name out-task-status"}),t.isEditable?s("row-actions-cell",{attrs:{"entry-id":e.id},on:{"edit-clicked":function(s){return t.$emit("edit-clicked",e)},"delete-clicked":function(s){return t.$emit("delete-clicked",e)}}}):s("td",[s("button",{staticClass:"button",on:{click:function(s){return t.removeStatusAutomation(e.id)}}},[t._v(" "+t._s(t.$t("main.remove"))+" ")])])],1)})),0)])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),s("p",{staticClass:"has-text-centered nb-status-automations"},[t._v(" "+t._s(t.entries.length)+" "+t._s(t.$tc("status_automations.number",t.entries.length))+" ")])],1)},i=[],n=s("a34a"),r=s.n(n),o=s("2f62"),c=s("31f2"),u=s("0a35"),l=s("14b2"),d=s("e60b"),p=s("58f5"),f=s("b36f");function m(t,e,s,a,i,n,r){try{var o=t[n](r),c=o.value}catch(u){return void s(u)}o.done?e(c):Promise.resolve(c).then(a,i)}function b(t){return function(){var e=this,s=arguments;return new Promise((function(a,i){var n=t.apply(e,s);function r(t){m(n,a,i,r,o,"next",t)}function o(t){m(n,a,i,r,o,"throw",t)}r(void 0)}))}}function h(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function y(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?h(Object(s),!0).forEach((function(e){v(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function v(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var _={name:"status-automation-list",mixins:[c["a"]],components:{AlertTriangleIcon:u["a"],RowActionsCell:l["a"],TableInfo:d["a"],TaskTypeName:p["a"],TaskStatusName:f["a"]},props:["entries","isLoading","isError","isEditable"],data:function(){return{}},computed:y({},Object(o["c"])(["getTaskStatus","getTaskType","isTaskTypePriorityHigherById","isStatusAutomationDisabled","remainingStatusAutomations"])),methods:y(y({},Object(o["b"])(["removeStatusAutomationFromProduction"])),{},{removeStatusAutomation:function(t){var e=this;return b(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.removeStatusAutomationFromProduction(t);case 2:return s.next=4,e.$nextTick();case 4:e.remainingStatusAutomations.length>0&&(e.statusAutomationId=e.remainingStatusAutomations[0].id);case 5:case"end":return s.stop()}}),s)})))()}})},k=_,T=(s("67e9"),s("0c7c")),g=Object(T["a"])(k,a,i,!1,null,"2dc688be",null);e["a"]=g.exports},5388:function(t,e,s){},"5d96":function(t,e,s){"use strict";s("bc2f")},"63a8":function(t,e,s){"use strict";s("1e14")},"67e9":function(t,e,s){"use strict";s("1368a")},7581:function(t,e,s){"use strict";s("75c0")},"75c0":function(t,e,s){},"81f8":function(t,e,s){"use strict";s("f660")},"8bb6":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"production-settings fixed-page"},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"tabs"},[s("ul",[s("li",{class:{"is-active":t.isActiveTab("brief")}},[s("a",{on:{click:function(e){t.activeTab="brief"}}},[t._v(" "+t._s(t.$t("productions.brief.title"))+" ")])]),s("li",{class:{"is-active":t.isActiveTab("parameters")}},[s("a",{on:{click:function(e){t.activeTab="parameters"}}},[t._v(" "+t._s(t.$t("productions.parameters.title"))+" ")])]),s("li",{class:{"is-active":t.isActiveTab("taskStatus")}},[s("a",{on:{click:function(e){t.activeTab="taskStatus"}}},[t._v(" "+t._s(t.$t("task_status.title"))+" ")])]),s("li",{class:{"is-active":t.isActiveTab("taskTypes")}},[s("a",{on:{click:function(e){t.activeTab="taskTypes"}}},[t._v(" "+t._s(t.$t("task_types.title"))+" ")])]),s("li",{class:{"is-active":t.isActiveTab("assetTypes")}},[s("a",{on:{click:function(e){t.activeTab="assetTypes"}}},[t._v(" "+t._s(t.$t("asset_types.title"))+" ")])]),s("li",{class:{"is-active":t.isActiveTab("statusAutomations")}},[s("a",{on:{click:function(e){t.activeTab="statusAutomations"}}},[t._v(" "+t._s(t.$t("status_automations.title"))+" ")])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isActiveTab("brief"),expression:"isActiveTab('brief')"}],staticClass:"tab"},[s("ProductionBrief")],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isActiveTab("parameters"),expression:"isActiveTab('parameters')"}],staticClass:"tab"},[s("production-parameters")],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isActiveTab("assetTypes"),expression:"isActiveTab('assetTypes')"}],staticClass:"tab"},[s("div",{staticClass:"flexrow mt1 mb1 add-asset-type"},[s("combobox",{staticClass:"flexrow-item",attrs:{options:t.remainingAssetTypes},model:{value:t.assetTypeId,callback:function(e){t.assetTypeId=e},expression:"assetTypeId"}}),s("button",{staticClass:"button flexrow-item",on:{click:t.addAssetType}},[t._v(" "+t._s(t.$t("main.add"))+" ")])],1),t.isEmpty(t.currentProduction.asset_types)?s("div",{staticClass:"box"},[t._v(" "+t._s(t.$t("settings.production.empty_list"))+" ")]):s("table",{staticClass:"datatable list"},[s("tbody",{staticClass:"datatable-body"},t._l(t.productionAssetTypes,(function(e){return s("tr",{key:e.id,staticClass:"datatable-row"},[s("td",{staticClass:"name"},[t._v(t._s(e.name))]),s("td",[s("button",{staticClass:"button",on:{click:function(s){return t.removeAssetType(e.id)}}},[t._v(" "+t._s(t.$t("main.remove"))+" ")])])])})),0)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isActiveTab("taskTypes"),expression:"isActiveTab('taskTypes')"}],staticClass:"tab"},[s("production-task-types")],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isActiveTab("taskStatus"),expression:"isActiveTab('taskStatus')"}],staticClass:"tab"},[t.isEmpty(t.remainingTaskStatuses)?t._e():s("div",{staticClass:"flexrow mt1 mb1 add-task-status"},[s("combobox-status",{staticClass:"flexrow-item selector",attrs:{"task-status-list":t.remainingTaskStatuses},model:{value:t.taskStatusId,callback:function(e){t.taskStatusId=e},expression:"taskStatusId"}}),s("button",{staticClass:"button flexrow-item",on:{click:t.addTaskStatus}},[t._v(" "+t._s(t.$t("main.add"))+" ")])],1),t.isEmpty(t.currentProduction.task_statuses)?s("div",{staticClass:"box"},[t._v(" "+t._s(t.$t("settings.production.empty_list"))+" ")]):s("table",{staticClass:"datatable"},[s("thead",[s("tr",[s("th",{staticClass:"th-name"},[t._v(t._s(t.$t("task_status.fields.name")))]),s("th",{staticClass:"th-short-name"},[t._v(t._s(t.$t("task_status.fields.short_name")))]),s("th",{staticClass:"th-bool"},[t._v(t._s(t.$t("task_status.fields.is_done")))]),s("th",{staticClass:"th-bool"},[t._v(t._s(t.$t("task_status.fields.is_retake")))]),s("th",{staticClass:"th-bool"},[t._v(t._s(t.$t("task_status.fields.is_artist_allowed")))]),s("th",{staticClass:"th-bool"},[t._v(t._s(t.$t("task_status.fields.is_client_allowed")))])])]),s("tbody",{staticClass:"datatable-body"},[t._l(t.productionTaskStatuses,(function(e){return[e?s("tr",{key:e.id,staticClass:"datatable-row"},[s("td",[t._v(" "+t._s(e.name)+" ")]),s("td",{staticClass:"name"},[s("validation-tag",{attrs:{"is-static":!0,task:{task_status_id:e.id}}})],1),s("td",[t._v(t._s(t.getBooleanTranslation(e.is_done)))]),s("td",[t._v(t._s(t.getBooleanTranslation(e.is_retake)))]),s("td",[t._v(t._s(t.getBooleanTranslation(e.is_artist_allowed)))]),s("td",[t._v(t._s(t.getBooleanTranslation(e.is_client_allowed)))]),s("td",[s("button",{staticClass:"button",on:{click:function(s){return t.removeTaskStatus(e.id)}}},[t._v(" "+t._s(t.$t("main.remove"))+" ")])])]):t._e()]}))],2)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isActiveTab("statusAutomations"),expression:"isActiveTab('statusAutomations')"}],staticClass:"tab"},[s("production-status-automations")],1)])])},i=[],n=s("a34a"),r=s.n(n),o=s("2f62"),c=s("992f"),u=s("56a0"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"brief"},[t.isEditing?s("div",{staticClass:"box has-text-right"},[s("textarea-field",{ref:"textarea",staticClass:"editor",attrs:{"input-class":"textarea"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.editBrief.apply(null,arguments):null}},model:{value:t.brief,callback:function(e){t.brief=e},expression:"brief"}}),t.errors.editBrief?s("p",{staticClass:"error mt1 has-text-right"},[t._v(" "+t._s(t.$t("productions.brief.edit.errorText"))+" ")]):t._e(),s("p",[s("button-simple",{attrs:{"is-primary":!0,"is-loading":t.isLoading,disabled:t.isLoading,text:t.$t("main.save")},on:{click:t.editBrief}})],1)],1):s("div",{staticClass:"box",on:{dblclick:t.openEditing}},[t.isEmpty(t.currentProduction.description)?s("div",[s("p",[t._v(t._s(t.$t("productions.brief.empty")))])]):s("div",{staticClass:"content",domProps:{innerHTML:t._s(t.compileMarkdown(t.currentProduction.description))}})])])},d=[],p=s("66be"),f=s("1149"),m=s("de40");function b(t,e,s,a,i,n,r){try{var o=t[n](r),c=o.value}catch(u){return void s(u)}o.done?e(c):Promise.resolve(c).then(a,i)}function h(t){return function(){var e=this,s=arguments;return new Promise((function(a,i){var n=t.apply(e,s);function r(t){b(n,a,i,r,o,"next",t)}function o(t){b(n,a,i,r,o,"throw",t)}r(void 0)}))}}function y(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function v(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?y(Object(s),!0).forEach((function(e){_(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function _(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var k={name:"production-brief",components:{ButtonSimple:m["a"],TextareaField:f["a"]},data:function(){return{brief:"",isEditing:!1,isLoading:!1,errors:{editBrief:!1}}},computed:v(v({},Object(o["c"])(["currentProduction"])),{},{textarea:function(){return this.$refs.textarea}}),mounted:function(){this.currentProduction&&(this.brief=this.currentProduction.description)},methods:v(v({},Object(o["b"])(["editProduction","setProduction"])),{},{isEmpty:function(t){return!t||0===t.length},openEditing:function(){var t=this;this.isEditing=!0,this.$nextTick((function(){t.textarea.focus()}))},editBrief:function(){var t=this;return h(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.prev=1,e.next=4,t.editProduction({id:t.currentProduction.id,description:t.brief});case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e["catch"](1),t.errors.editBrief=!0,t.isLoading=!1,e.abrupt("return");case 11:t.isEditing=!1,t.isLoading=!1;case 13:case"end":return e.stop()}}),e,null,[[1,6]])})))()},compileMarkdown:function(t){return Object(p["d"])(t)}})},T=k,g=(s("7581"),s("0c7c")),O=Object(g["a"])(T,l,d,!1,null,"1caec5ae",null),w=O.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-one-third box"},[s("form",{staticClass:"form",on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("productions.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("div",{staticClass:"columns"},[s("div",{staticClass:"mr1"},[s("date-field",{ref:"startDateField",attrs:{label:t.$t("productions.fields.start_date"),"short-date":!0},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}})],1),s("div",[s("date-field",{ref:"endDateField",attrs:{label:t.$t("productions.fields.end_date"),"short-date":!0},model:{value:t.form.end_date,callback:function(e){t.$set(t.form,"end_date",e)},expression:"form.end_date"}})],1)]),s("combobox",{ref:"productionTypeField",attrs:{localeKeyPrefix:"productions.type.",label:t.$t("productions.fields.type"),options:t.productionTypeOptions},on:{enter:t.runConfirmation},model:{value:t.form.production_type,callback:function(e){t.$set(t.form,"production_type",e)},expression:"form.production_type"}}),t.currentProduction&&t.currentProduction.id&&t.isLocalTVShow?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nbEpisodesField",attrs:{label:t.$t("productions.fields.nb_episodes")},on:{enter:t.runConfirmation},model:{value:t.form.nb_episodes,callback:function(e){t.$set(t.form,"nb_episodes",e)},expression:"form.nb_episodes"}}):t._e(),t.currentProduction&&t.currentProduction.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"fpsField",attrs:{label:t.$t("productions.fields.fps")},on:{enter:t.runConfirmation},model:{value:t.form.fps,callback:function(e){t.$set(t.form,"fps",e)},expression:"form.fps"}}):t._e(),t.currentProduction&&t.currentProduction.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"ratioField",attrs:{label:t.$t("productions.fields.ratio")},on:{enter:t.runConfirmation},model:{value:t.form.ratio,callback:function(e){t.$set(t.form,"ratio",e)},expression:"form.ratio"}}):t._e(),t.currentProduction&&t.currentProduction.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"resolutionField",attrs:{label:t.$t("productions.fields.resolution")},on:{enter:t.runConfirmation},model:{value:t.form.resolution,callback:function(e){t.$set(t.form,"resolution",e)},expression:"form.resolution"}}):t._e(),t.currentProduction&&t.currentProduction.id?s("div",[s("label",{staticClass:"label"},[t._v(t._s(t.$t("productions.picture")))]),s("file-upload",{ref:"fileField",attrs:{"is-primary":!1,label:t.$t("main.csv.upload_file"),accept:".png,.jpg,.jpeg"},on:{fileselected:t.onFileSelected}})],1):t._e(),t.isError?s("p",{staticClass:"error mt1"},[t._v(" "+t._s(t.$t("productions.edit_error"))+" ")]):t._e(),s("div",{staticClass:"has-text-right mt2"},[s("button-simple",{class:{"is-loading":t.isLoading},attrs:{"is-primary":!0,disabled:t.isLoading,text:t.$t("main.save")},on:{click:t.editParameters}})],1)],1)])])},j=[],S=s("3657"),x=s("f4c7"),C=s("d37c"),A=s("4085"),D=s("7bf8");function $(t,e,s,a,i,n,r){try{var o=t[n](r),c=o.value}catch(u){return void s(u)}o.done?e(c):Promise.resolve(c).then(a,i)}function I(t){return function(){var e=this,s=arguments;return new Promise((function(a,i){var n=t.apply(e,s);function r(t){$(n,a,i,r,o,"next",t)}function o(t){$(n,a,i,r,o,"throw",t)}r(void 0)}))}}function E(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function L(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?E(Object(s),!0).forEach((function(e){F(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function F(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var B={name:"production-parameters",components:{Combobox:c["a"],DateField:C["a"],FileUpload:A["a"],TextField:D["a"],ButtonSimple:m["a"]},data:function(){return{formData:null,isLoading:!1,isError:!1,isLocalTVShow:!1,productionTypeOptions:x["a"],form:{name:"",start_date:new Date,end_date:new Date,nb_episodes:0,episode_span:0,fps:"",ratio:"",resolution:"",production_type:"short"}}},computed:L({},Object(o["c"])(["currentProduction","productionAvatarFormData","productionStatus","isTVShow"])),mounted:function(){this.resetForm()},watch:{currentProduction:{handler:function(){this.resetForm(),this.updateTvShowRelatedDatas(this.isTVShow)},deep:!0},"form.production_type":function(t){this.updateTvShowRelatedDatas("tvshow"===t)}},methods:L(L({},Object(o["b"])(["editProduction","storeProductionPicture","uploadProductionAvatar"])),{},{onFileSelected:function(t){this.formData=t,this.storeProductionPicture(t)},isEmpty:function(t){return!t||0===t.length},runConfirmation:function(){this.$emit("confirm",this.form)},updateTvShowRelatedDatas:function(t){this.isLocalTVShow=t,t&&this.currentProduction?(this.form.nb_episodes=this.currentProduction.nb_episodes,this.form.episode_span=this.currentProduction.episode_span):(this.form.nb_episodes=0,this.form.episode_span=0)},resetForm:function(){this.currentProduction?this.form={name:this.currentProduction.name,start_date:Object(S["u"])(this.currentProduction.start_date).toDate(),end_date:Object(S["u"])(this.currentProduction.end_date).toDate(),production_type:this.currentProduction.production_type||"short",nb_episodes:this.currentProduction.nb_episodes,episode_span:this.currentProduction.episode_span,fps:this.currentProduction.fps,ratio:this.currentProduction.ratio,resolution:this.currentProduction.resolution}:this.form={name:"",start_date:new Date,end_date:new Date,production_type:"short",nb_episodes:0,episode_span:0,fps:"",ratio:"",resolution:""}},editParameters:function(){var t=this;return I(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.prev=1,e.next=4,t.editProduction(L(L({id:t.currentProduction.id},t.form),{},{start_date:Object(S["g"])(t.form.start_date),end_date:Object(S["g"])(t.form.end_date)}));case 4:if(!t.productionAvatarFormData){e.next=7;break}return e.next=7,t.uploadProductionAvatar(t.currentProduction.id);case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e["catch"](1),t.isLoading=!1,t.isError=!0,e.abrupt("return");case 14:t.isLoading=!1;case 15:case"end":return e.stop()}}),e,null,[[1,9]])})))()}})},M=B,N=(s("d7bc"),Object(g["a"])(M,P,j,!1,null,"98b2e26c",null)),R=N.exports,U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[t.remainingTaskTypes.length>0?[s("div",{staticClass:"flexrow mt1 mb1 add-task-type"},[s("combobox-task-type",{staticClass:"flexrow-item selector",attrs:{"task-type-list":t.remainingTaskTypes},model:{value:t.taskTypeId,callback:function(e){t.taskTypeId=e},expression:"taskTypeId"}}),s("button",{staticClass:"button flexrow-item",attrs:{disabled:t.loading.scheduleTimeDelete},on:{click:t.addTaskType}},[t._v(" "+t._s(t.$t("main.add"))+" ")])],1)]:t._e(),t.errors.delete||t.errors.scheduleTimeUpdate?s("p",{staticClass:"error mt1 mb1"},[t._v(" "+t._s(t.$t("productions.edit_error"))+" ")]):t._e(),t.isEmpty(t.currentProduction.task_types)?s("div",{staticClass:"box"},[t._v(" "+t._s(t.$t("settings.production.empty_list"))+" ")]):t._l([t.assetTaskTypes,t.shotTaskTypes,t.editTaskTypes],(function(e,a){return[s("div",{key:a},[s("h2",{staticClass:"section-title"},[t._v(" "+t._s(e.title)+" ")]),e.list.length>0?s("table",{staticClass:"datatable list"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[t._v(" "+t._s(t.$t("task_types.fields.name"))+" ")]),s("th",{staticClass:"start-date"},[t._v(" "+t._s(t.$t("productions.fields.start_date"))+" ")]),s("th",{staticClass:"end-date"},[t._v(" "+t._s(t.$t("productions.fields.end_date"))+" ")]),s("th",{staticClass:"remove"})])]),s("draggable",{staticClass:"datatable-body",attrs:{draggable:".task-type",tag:"tbody"},on:{end:function(s){return t.updatePriorities(e.list)}},model:{value:e.list,callback:function(s){t.$set(e,"list",s)},expression:"taskListObject.list"}},t._l(e.list,(function(e){return s("production-task-type",{key:e.taskType.id,staticClass:"task-type",attrs:{"task-type":e.taskType,"schedule-item":e.scheduleItem},on:{"date-changed":t.onDateChanged,remove:t.removeTaskType}})})),1)],1):t._e()])]}))],2)])},V=[],q=s("b76a"),K=s.n(q),H=s("c1df"),J=s.n(H),z=s("2229"),G=s("e4fd"),Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",{key:t.taskType.id,staticClass:"datatable-row"},[s("task-type-cell",{attrs:{"task-type":t.taskType}}),s("td",{staticClass:"start-date"},[s("date-field",{attrs:{"disabled-dates":t.productionTimeRange,"can-delete":!1},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),s("td",{staticClass:"end-date"},[s("date-field",{attrs:{"disabled-dates":t.endDateTimeRange,"can-delete":!1},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),s("td",{staticClass:"remove"},[s("button",{staticClass:"button",on:{click:function(e){return t.$emit("remove",{scheduleItem:t.scheduleItem,taskType:t.taskType})}}},[t._v(" "+t._s(t.$t("main.remove"))+" ")])])],1)},W=[],X=s("58f5");function Y(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Z(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(s),!0).forEach((function(e){tt(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Y(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function tt(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var et={name:"production-task-type",components:{DateField:C["a"],TaskTypeCell:X["a"]},props:{taskType:{required:!0,type:Object},scheduleItem:{required:!0,type:Object}},data:function(){return{startDate:null,endDate:null,silent:!0}},computed:Z(Z({},Object(o["c"])(["currentProduction","getTaskTypePriority"])),{},{productionTimeRange:function(){var t={to:Object(S["t"])(this.currentProduction.start_date).toDate(),from:Object(S["t"])(this.currentProduction.end_date).toDate()};return t},endDateTimeRange:function(){var t={to:this.startDate,from:Object(S["t"])(this.currentProduction.end_date).toDate()};return t}}),mounted:function(){var t=this;this.startDate=Object(S["t"])(this.scheduleItem.start_date).toDate(),this.endDate=Object(S["t"])(this.scheduleItem.end_date).toDate(),this.$nextTick((function(){t.silent=!1}))},methods:Z({},Object(o["b"])([])),watch:{startDate:function(){var t=this;if(!this.silent){var e=J()(this.startDate),s=J()(this.endDate);this.silent=!0,s.isBefore(e)&&(s=e.clone().add(1,"days"),this.endDate=s.toDate());var a=Z({},this.scheduleItem);a.startDate=e,a.endDate=s,this.$emit("date-changed",a),this.$nextTick((function(){t.silent=!1}))}},endDate:function(){var t=this;if(!this.silent){var e=J()(this.startDate),s=J()(this.endDate);this.silent=!0,s.isBefore(e)&&(e=s.clone().add(-1,"days"),this.startDate=e.toDate());var a=Z({},this.scheduleItem);a.startDate=e,a.endDate=s,this.$emit("date-changed",a),this.$nextTick((function(){t.silent=!1}))}},scheduleItem:function(){var t=this;this.silent=!0,this.startDate=Object(S["t"])(this.scheduleItem.start_date).toDate(),this.endDate=Object(S["t"])(this.scheduleItem.end_date).toDate(),this.$nextTick((function(){t.silent=!1}))}}},st=et,at=(s("5d96"),Object(g["a"])(st,Q,W,!1,null,"aa45be50",null)),it=at.exports;function nt(t){return ut(t)||ct(t)||ot(t)||rt()}function rt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ot(t,e){if(t){if("string"===typeof t)return lt(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?lt(t,e):void 0}}function ct(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function ut(t){if(Array.isArray(t))return lt(t)}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}function dt(t,e,s,a,i,n,r){try{var o=t[n](r),c=o.value}catch(u){return void s(u)}o.done?e(c):Promise.resolve(c).then(a,i)}function pt(t){return function(){var e=this,s=arguments;return new Promise((function(a,i){var n=t.apply(e,s);function r(t){dt(n,a,i,r,o,"next",t)}function o(t){dt(n,a,i,r,o,"throw",t)}r(void 0)}))}}function ft(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function mt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(s),!0).forEach((function(e){bt(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ft(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function bt(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var ht={name:"production-task-types",components:{ComboboxTaskType:G["a"],draggable:K.a,ProductionTaskType:it},data:function(){return{assetTaskTypes:{list:[]},editTaskTypes:{list:[]},episode_span:0,shotTaskTypes:{list:[]},taskTypeId:"",loading:{episode_span:!1,scheduleTimeUpdate:!1,scheduleTimeDelete:!1},errors:{episode_span:!1,scheduleTimeUpdate:!1,delete:!1}}},mounted:function(){var t=this;this.remainingTaskTypes.length>0&&(this.taskTypeId=this.remainingTaskTypes[0].id),this.resetDisplayedTaskTypes(),this.currentProduction&&(this.episode_span=this.currentProduction.episode_span,this.loadAllScheduleItems(this.currentProduction).then((function(){t.resetDisplayedTaskTypes()})))},computed:mt(mt({},Object(o["c"])(["currentProduction","currentScheduleItems","productionTaskTypes","productionAssetTaskTypes","productionShotTaskTypes","productionEditTaskTypes","taskStatusMap","taskTypeMap","taskTypes","isTVShow"])),{},{remainingTaskTypes:function(){var t=this;return Object(z["d"])(this.taskTypes.filter((function(e){return!t.currentProduction.task_types.includes(e.id)})))}}),methods:mt(mt({},Object(o["b"])(["addTaskTypeToProduction","createScheduleItem","deleteScheduleItem","editProduction","editTaskTypeLink","loadAllScheduleItems","loadContext","removeTaskTypeFromProduction","saveScheduleItem"])),{},{isEmpty:function(t){return!t||0===t.length},resetDisplayedTaskTypes:function(){this.resetAssetTaskTypes(),this.resetShotTaskTypes(),this.resetEditTaskTypes()},getScheduleItemForTaskType:function(t){var e=this.currentScheduleItems.find((function(e){return e.task_type_id===t.id}))||{start_date:Object(S["d"])(J()()),end_date:Object(S["d"])(J()())};return e},addTaskType:function(){var t=this;return pt(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.addTaskTypeToProduction({taskTypeId:t.taskTypeId,priority:t.assetTaskTypes.length});case 2:return e.next=4,t.createScheduleItem({startDate:J()(),endDate:J()(),project_id:t.currentProduction.id,task_type_id:t.taskTypeId});case 4:t.remainingTaskTypes.length>0?t.taskTypeId=t.remainingTaskTypes[0].id:t.taskTypeId="",t.resetDisplayedTaskTypes();case 6:case"end":return e.stop()}}),e)})))()},removeTaskType:function(t){var e=this;return pt(r.a.mark((function s(){var a,i;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.taskType,i=t.scheduleItem,e.errors.delete=!1,s.prev=2,s.next=5,e.removeTaskTypeFromProduction(a.id);case 5:if(null===i){s.next=10;break}return e.loading.scheduleTimeDelete=!0,s.next=9,e.deleteScheduleItem(i);case 9:e.loading.scheduleTimeDelete=!1;case 10:s.next=17;break;case 12:return s.prev=12,s.t0=s["catch"](2),e.errors.delete=!0,e.loading.scheduleTimeDelete=!1,s.abrupt("return");case 17:return s.next=19,e.$nextTick();case 19:e.remainingTaskTypes.length>0&&(e.taskTypeId=e.remainingTaskTypes[0].id),e.resetDisplayedTaskTypes();case 21:case"end":return s.stop()}}),s,null,[[2,12]])})))()},resetAssetTaskTypes:function(){var t=this,e=Object(z["o"])(nt(this.productionAssetTaskTypes),this.currentProduction).map((function(e){return{taskType:e,scheduleItem:t.getScheduleItemForTaskType(e)}}));this.assetTaskTypes={title:this.$t("assets.title"),list:e}},resetShotTaskTypes:function(){var t=this,e=Object(z["o"])(nt(this.productionShotTaskTypes),this.currentProduction).map((function(e){return{taskType:e,scheduleItem:t.getScheduleItemForTaskType(e)}}));this.shotTaskTypes={title:this.$t("shots.title"),list:e}},resetEditTaskTypes:function(){var t=this,e=Object(z["o"])(nt(this.productionEditTaskTypes),this.currentProduction).map((function(e){return{taskType:e,scheduleItem:t.getScheduleItemForTaskType(e)}}));this.editTaskTypes={title:this.$t("edits.title"),list:e}},editEpisodeSpan:function(){var t=this;return pt(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading.episode_span=!0,t.errors.episode_span=!1,e.prev=2,e.next=5,t.editProduction({id:t.currentProduction.id,episode_span:t.episode_span});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](2),t.errors.episode_span=!0,console.error(e.t0);case 11:t.loading.episode_span=!1;case 12:case"end":return e.stop()}}),e,null,[[2,7]])})))()},onDateChanged:function(t){var e=this;return pt(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.errors.scheduleTimeUpdate=!1,s.prev=1,s.next=4,e.saveScheduleItem(t);case 4:s.next=10;break;case 6:s.prev=6,s.t0=s["catch"](1),console.error(s.t0),e.errors.scheduleTimeUpdate=!0;case 10:case"end":return s.stop()}}),s,null,[[1,6]])})))()},savePriorities:function(t){var e=this;return pt(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=(new Date).getTime(),e.lastCall=e.lastCall||0,!(a-e.lastCall>1e3)||e.isSaving){s.next=14;break}return e.lastCall=a,e.isSaving=!0,s.next=7,Promise.all(t.map(function(){var t=pt(r.a.mark((function t(s){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.editTaskTypeLink(s);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 7:if(e.isSaving=!1,!e.newSaveCall){s.next=11;break}return s.next=11,e.savePriorities(t);case 11:setTimeout((function(){e.$store.commit("SORT_VALIDATION_COLUMNS",e.taskTypeMap)}),100),s.next=15;break;case 14:e.newSaveCall=!0;case 15:case"end":return s.stop()}}),s)})))()},updatePriorities:function(t){var e=this;return pt(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=[],t.forEach((function(t,s){s+=1;var i={projectId:e.currentProduction.id,taskTypeId:t.taskType.id,priority:s};a.push(i)})),s.next=4,e.savePriorities(a);case 4:return s.next=6,e.loadContext();case 6:case"end":return s.stop()}}),s)})))()}}),watch:{currentProduction:{handler:function(){this.episode_span=this.currentProduction.episode_span,this.loadAllScheduleItems(this.currentProduction),this.resetDisplayedTaskTypes()},deep:!0}}},yt=ht,vt=(s("63a8"),Object(g["a"])(yt,U,V,!1,null,"529401f3",null)),_t=vt.exports,kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[t.remainingStatusAutomations.length>0?[t.remainingStatusAutomations?s("div",{staticClass:"flexrow mt1 mb1 add-status-automation"},[s("combobox-status-automation",{staticClass:"flexrow-item selector",attrs:{"status-automations-list":t.remainingStatusAutomations},model:{value:t.statusAutomationId,callback:function(e){t.statusAutomationId=e},expression:"statusAutomationId"}}),s("button",{staticClass:"button flexrow-item",on:{click:t.addStatusAutomation}},[t._v(" "+t._s(t.$t("main.add"))+" ")])],1):t._e()]:t._e(),t.isEmpty(t.productionStatusAutomations)?s("div",{staticClass:"box"},[t._v(" "+t._s(t.$t("settings.production.empty_automation_list"))+" ")]):t._e(),t.isEmpty(t.productionStatusAutomations)?t._e():s("status-automation-list",{attrs:{entries:t.productionStatusAutomations}})],2)])},Tt=[],gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{field:t.withMargin,"field--narrow":t.narrow}},[t.label.length>0?s("label",{staticClass:"label"},[t._v(" "+t._s(t.label)+" ")]):t._e(),s("div",{staticClass:"status-automation-combo"},[s("div",{staticClass:"flexrow",on:{click:t.toggleStatusAutomationsList}},[s("div",{staticClass:"selected-status-automation-line flexrow-item"},[t.currentStatusAutomation?s("status-automation-item",{attrs:{"status-automation":t.currentStatusAutomation}}):t._e()],1),s("chevron-down-icon",{staticClass:"down-icon flexrow-item"})],1),t.showStatusAutomationsList?s("div",{ref:"select",staticClass:"select-input"},t._l(t.statusAutomationsList,(function(e){return s("div",{key:e.id,staticClass:"status-automation-line",on:{click:function(s){return t.selectStatusAutomation(e)}}},[e?s("status-automation-item",{attrs:{"status-automation":e}}):t._e()],1)})),0):t._e()]),s("combobox-mask",{attrs:{displayed:t.showStatusAutomationsList},on:{click:t.toggleStatusAutomationsList}})],1)},Ot=[],wt=s("0a35"),Pt=s("7930"),jt=s("dbde"),St=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"status-automation flexrow"},[s("span",{staticClass:"flexrow-item entity-type"},[t._v(" "+t._s(t.statusAutomation.entity_type)+" ")]),s("span",{staticClass:"in-task-type flexrow-item"},[s("task-type-name",{staticClass:"in-task-type flexrow-item",attrs:{"task-type":t.getTaskType(t.statusAutomation.in_task_type_id)}})],1),s("span",{staticClass:"in-task-status flexrow-item"},["ready_for"!==t.statusAutomation.in_field_type?s("task-status-name",{attrs:{entry:t.getTaskStatus(t.statusAutomation.in_task_status_id)}}):t._e()],1),s("span",{staticClass:"flexrow-item trigger-type"},[t._v(" changes "+t._s("ready_for"===t.statusAutomation.out_field_type?"ready for to":"task status for")+" ")]),s("span",{staticClass:"out-task-type flexrow-item"},[s("task-type-name",{attrs:{"task-type":t.getTaskType(t.statusAutomation.out_task_type_id)}})],1),"status"===t.statusAutomation.out_field_type?s("span",{staticClass:"flexrow-item"},[t._v(" to ")]):t._e(),s("span",{staticClass:"out-task-status flexrow-item"},["status"===t.statusAutomation.out_field_type?s("task-status-name",{attrs:{entry:t.getTaskStatus(t.statusAutomation.out_task_status_id)}}):t._e()],1)])},xt=[],Ct=s("274f"),At=s("b36f");function Dt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function $t(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(s),!0).forEach((function(e){It(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Dt(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function It(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var Et={name:"status-automation-item",components:{TaskTypeName:Ct["a"],TaskStatusName:At["a"]},props:{statusAutomation:{type:Object,default:null},productionId:{type:String,default:null},deletable:{type:Boolean,default:!1}},computed:$t($t({},Object(o["c"])(["isCurrentUserClient","getTaskStatus","getTaskType"])),{},{statusAutomationPath:function(){var t={name:"status-automation",params:{production_id:this.productionId,status_automation_id:this.statusAutomation.id,type:this.$tc(this.statusAutomation.for_entity.toLowerCase(),2)}};return(this.statusAutomation.episode_id||this.$route.params.episode_id)&&(t.name="episode-status-automation",t.params.episode_id=this.statusAutomation.episode_id||this.$route.params.episode_id),t}}),methods:$t({},Object(o["b"])([]))},Lt=Et,Ft=(s("ba10"),Object(g["a"])(Lt,St,xt,!1,null,"98d38582",null)),Bt=Ft.exports;function Mt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Nt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(s),!0).forEach((function(e){Rt(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Mt(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function Rt(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var Ut={name:"combobox-status-automation",components:{ChevronDownIcon:wt["j"],ComboboxMask:jt["a"],StatusAutomationItem:Bt},data:function(){return{showStatusAutomationsList:!1}},props:{label:{default:"",type:String},statusAutomationsList:{default:function(){return[]},type:Array},value:{default:"",type:String},narrow:{default:!1,type:Boolean},withMargin:{default:!0,type:Boolean},addPlaceholder:{default:!1,type:Boolean}},mounted:function(){this.selectedStatusAutomation=this.statusAutomation},computed:Nt(Nt({},Object(o["c"])(["isDarkTheme","statusAutomationMap","getTaskStatus","getTaskType"])),{},{currentStatusAutomation:function(){return this.value?this.statusAutomationMap.get(this.value):this.addPlaceholder?{short_name:"+ status",color:"#999"}:this.statusAutomationsList[0]}}),methods:{selectStatusAutomation:function(t){this.$emit("input",t.id),this.showStatusAutomationsList=!1},backgroundColor:function(t){return t&&!t.is_default||this.isDarkTheme?t&&!t.is_default||!this.isDarkTheme?this.isDarkTheme?Pt["a"].darkenColor(t.color):t.color:"#5F626A":"#ECECEC"},color:function(t){return t&&t.is_default&&!this.isDarkTheme?"#333":"white"},toggleStatusAutomationsList:function(){this.showStatusAutomationsList=!this.showStatusAutomationsList}}},Vt=Ut,qt=(s("1f23"),Object(g["a"])(Vt,gt,Ot,!1,null,"42beba9f",null)),Kt=qt.exports,Ht=s("536b");function Jt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function zt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(s),!0).forEach((function(e){Gt(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Jt(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function Gt(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var Qt={name:"production-status-automations",components:{ComboboxStatusAutomation:Kt,StatusAutomationList:Ht["a"]},data:function(){return{statusAutomations:[],statusAutomationId:""}},mounted:function(){this.remainingStatusAutomations.length>0&&(this.statusAutomationId=this.remainingStatusAutomations[0].id)},computed:zt({},Object(o["c"])(["currentProduction","productionStatusAutomations","statusAutomationMap","remainingStatusAutomations"])),methods:zt(zt({},Object(o["b"])(["addStatusAutomationToProduction"])),{},{isEmpty:function(t){return!t||0===t.length},addStatusAutomation:function(){this.addStatusAutomationToProduction(this.statusAutomationId),this.remainingStatusAutomations.length>0?this.statusAutomationId=this.remainingStatusAutomations[0].id:this.statusAutomationId=""}}),watch:{}},Wt=Qt,Xt=(s("e41d"),Object(g["a"])(Wt,kt,Tt,!1,null,"186451e6",null)),Yt=Xt.exports,Zt=s("fe13");function te(t,e,s,a,i,n,r){try{var o=t[n](r),c=o.value}catch(u){return void s(u)}o.done?e(c):Promise.resolve(c).then(a,i)}function ee(t){return function(){var e=this,s=arguments;return new Promise((function(a,i){var n=t.apply(e,s);function r(t){te(n,a,i,r,o,"next",t)}function o(t){te(n,a,i,r,o,"throw",t)}r(void 0)}))}}function se(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function ae(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?se(Object(s),!0).forEach((function(e){ie(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):se(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function ie(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var ne={name:"production-settings",components:{ProductionBrief:w,ProductionParameters:R,ProductionTaskTypes:_t,ProductionStatusAutomations:Yt,Combobox:c["a"],ComboboxStatus:u["a"],ValidationTag:Zt["a"]},data:function(){return{activeTab:"brief",assetTypeId:"",taskStatusId:""}},mounted:function(){this.remainingAssetTypes.length>0&&(this.assetTypeId=this.remainingAssetTypes[0].value),this.remainingTaskStatuses.length>0&&(this.taskStatusId=this.remainingTaskStatuses[0].id),this.$route.query.tab&&(this.activeTab=this.$route.query.tab)},computed:ae(ae({},Object(o["c"])(["assetTypeMap","currentProduction","assetTypes","productionAssetTypes","productionTaskTypes","productionTaskStatuses","productionStatusAutomations","taskStatus","taskStatusMap","taskTypeMap","taskTypes","isTVShow"])),{},{remainingAssetTypes:function(){var t=this;return this.assetTypes.filter((function(e){return!t.currentProduction.asset_types.includes(e.id)})).map((function(t){return{label:t.name,value:t.id}}))},remainingTaskStatuses:function(){var t=this;return this.taskStatus.filter((function(e){return!t.currentProduction.task_statuses.includes(e.id)}))}}),methods:ae(ae({},Object(o["b"])(["addAssetTypeToProduction","addTaskStatusToProduction","removeAssetTypeFromProduction","removeTaskStatusFromProduction"])),{},{isEmpty:function(t){return!t||0===t.length},isActiveTab:function(t){return this.activeTab===t},addAssetType:function(){this.addAssetTypeToProduction(this.assetTypeId),this.remainingAssetTypes.length>0&&(this.assetTypeId=this.remainingAssetTypes[0].value)},removeAssetType:function(t){this.removeAssetTypeFromProduction(t)},addTaskStatus:function(){this.addTaskStatusToProduction(this.taskStatusId),this.remainingTaskStatuses.length>0?this.taskStatusId=this.remainingTaskStatuses[0].id:this.taskStatusId=""},removeTaskStatus:function(t){var e=this;return ee(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.removeTaskStatusFromProduction(t);case 2:return s.next=4,e.$nextTick();case 4:e.remainingTaskStatuses.length>0&&(e.taskStatusId=e.remainingTaskStatuses[0].id);case 5:case"end":return s.stop()}}),s)})))()},getBooleanTranslation:function(t){return t?this.$t("main.yes"):this.$t("main.no")}}),watch:{activeTab:function(){this.$route.query.tab!==this.activeTab&&this.$router.push({query:{tab:this.activeTab}})}},metaInfo:function(){return{title:"".concat(this.currentProduction.name," | ").concat(this.$t("settings.title")," - Kitsu")}}},re=ne,oe=(s("296b"),Object(g["a"])(re,a,i,!1,null,"67603892",null));e["default"]=oe.exports},a711:function(t,e,s){},b36f:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"name"},[s("div",{staticClass:"tag",class:[t.disable?"canceled":""],style:{background:t.color,color:t.textColor},attrs:{title:t.entry.name}},[t._v(" "+t._s(t.entry.short_name)+" ")])])},i=[],n=s("2f62");function r(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?r(Object(s),!0).forEach((function(e){c(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var u={name:"task-status-name",components:{},props:{entry:{type:Object,default:function(){}},disable:{type:Boolean,default:!1}},computed:o(o({},Object(n["c"])(["isDarkTheme"])),{},{color:function(){return"Todo"===this.entry.name&&this.isDarkTheme?"#5F626A":this.entry.color},textColor:function(){return this.entry.is_default&&!this.isDarkTheme?"#333":"white"}}),methods:o({},Object(n["b"])([]))},l=u,d=(s("81f8"),s("0c7c")),p=Object(d["a"])(l,a,i,!1,null,"e2980138",null);e["a"]=p.exports},ba10:function(t,e,s){"use strict";s("e945")},bc2f:function(t,e,s){},d7bc:function(t,e,s){"use strict";s("5388")},e41d:function(t,e,s){"use strict";s("e6d9")},e6d9:function(t,e,s){},e945:function(t,e,s){},f660:function(t,e,s){}}]);
//# sourceMappingURL=chunk-47b68228.c1b9cf5e.js.map