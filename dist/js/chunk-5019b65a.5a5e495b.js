(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5019b65a"],{"1368a":function(t,e,s){},"459c":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"level page-header"},[s("div",{staticClass:"level-left"},[s("page-title",{attrs:{text:t.title}})],1),s("div",{staticClass:"level-right"},[s("button-simple",{staticClass:"level-item",attrs:{icon:"plus",text:t.newEntryLabel},on:{click:function(e){return t.$emit("new-clicked")}}})],1)])},i=[],o=s("2f62"),n=s("de40"),r=s("8d07");function u(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(Object(s),!0).forEach((function(e){l(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var d={name:"list-page-header",components:{ButtonSimple:n["a"],PageTitle:r["a"]},props:{title:{type:String,default:""},newEntryLabel:{type:String,default:""}},computed:c({},Object(o["c"])([])),methods:c({},Object(o["b"])([])),watch:{}},m=d,f=s("0c7c"),p=Object(f["a"])(m,a,i,!1,null,"bf4864ae",null);e["a"]=p.exports},"4afa":function(t,e,s){},"536b":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"datatable-wrapper"},[s("table",{staticClass:"datatable"},[s("thead",{staticClass:"datatable-head"},[s("tr",[s("th",{staticClass:"name",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("status_automations.fields.entity_type"))+" ")]),s("th",{staticClass:"in-task-type",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("status_automations.fields.in_task_type"))+" ")]),s("th",{staticClass:"in-task-status",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("status_automations.fields.in_task_status"))+" ")]),s("th",{staticClass:"automation-type",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("status_automations.fields.out_field_type"))+" ")]),s("th",{staticClass:"out-task-type",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("status_automations.fields.out_task_type"))+" ")]),s("th",{staticClass:"in-task-status",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("status_automations.fields.out_task_status"))+" ")]),s("th",{staticClass:"actions",attrs:{scope:"col"}},[t._v("Â ")])])]),s("tbody",{staticClass:"datatable-body"},t._l(t.entries,(function(e){return s("tr",{key:e.id,staticClass:"datatable-row"},[s("th",{staticClass:"name",attrs:{scope:"row"}},[s("div",{staticClass:"flexrow"},[t.isStatusAutomationDisabled(e)?s("span",{staticClass:"flexrow-item",attrs:{title:t.$t("status_automations.wrong_automation")}},[s("alert-triangle-icon")],1):t._e(),s("span",{staticClass:"flexrow-item"},[t._v(" "+t._s(e.entity_type)+" ")])])]),s("task-type-name",{staticClass:"in-task-type",attrs:{"task-type":t.getTaskType(e.in_task_type_id)}}),s("task-status-name",{staticClass:"in-task-status",attrs:{entry:t.getTaskStatus(e.in_task_status_id)}}),s("td",{staticClass:"input-separator"},[t._v(" "+t._s("ready_for"===e.out_field_type?t.$t("status_automations.change_ready_for"):t.$t("status_automations.change_status"))+" ")]),s("task-type-name",{staticClass:"out-task-type",attrs:{"task-type":t.getTaskType(e.out_task_type_id)}}),"status"===e.out_field_type?s("task-status-name",{staticClass:"out-task-status",attrs:{entry:t.getTaskStatus(e.out_task_status_id)}}):s("td",{staticClass:"name out-task-status"}),t.isEditable?s("row-actions-cell",{attrs:{"entry-id":e.id},on:{"edit-clicked":function(s){return t.$emit("edit-clicked",e)},"delete-clicked":function(s){return t.$emit("delete-clicked",e)}}}):s("td",[s("button",{staticClass:"button",on:{click:function(s){return t.removeStatusAutomation(e.id)}}},[t._v(" "+t._s(t.$t("main.remove"))+" ")])])],1)})),0)])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),s("p",{staticClass:"has-text-centered nb-status-automations"},[t._v(" "+t._s(t.entries.length)+" "+t._s(t.$tc("status_automations.number",t.entries.length))+" ")])],1)},i=[],o=s("a34a"),n=s.n(o),r=s("2f62"),u=s("31f2"),c=s("0a35"),l=s("14b2"),d=s("e60b"),m=s("58f5"),f=s("b36f");function p(t,e,s,a,i,o,n){try{var r=t[o](n),u=r.value}catch(c){return void s(c)}r.done?e(u):Promise.resolve(u).then(a,i)}function y(t){return function(){var e=this,s=arguments;return new Promise((function(a,i){var o=t.apply(e,s);function n(t){p(o,a,i,n,r,"next",t)}function r(t){p(o,a,i,n,r,"throw",t)}n(void 0)}))}}function b(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function T(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?b(Object(s),!0).forEach((function(e){h(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function h(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var k={name:"status-automation-list",mixins:[u["a"]],components:{AlertTriangleIcon:c["a"],RowActionsCell:l["a"],TableInfo:d["a"],TaskTypeName:m["a"],TaskStatusName:f["a"]},props:["entries","isLoading","isError","isEditable"],data:function(){return{}},computed:T({},Object(r["c"])(["getTaskStatus","getTaskType","isTaskTypePriorityHigherById","isStatusAutomationDisabled","remainingStatusAutomations"])),methods:T(T({},Object(r["b"])(["removeStatusAutomationFromProduction"])),{},{removeStatusAutomation:function(t){var e=this;return y(n.a.mark((function s(){return n.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.removeStatusAutomationFromProduction(t);case 2:return s.next=4,e.$nextTick();case 4:e.remainingStatusAutomations.length>0&&(e.statusAutomationId=e.remainingStatusAutomations[0].id);case 5:case"end":return s.stop()}}),s)})))()}})},_=k,v=(s("67e9"),s("0c7c")),O=Object(v["a"])(_,a,i,!1,null,"2dc688be",null);e["a"]=O.exports},"67e9":function(t,e,s){"use strict";s("1368a")},"81f8":function(t,e,s){"use strict";s("f660")},"9b52":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"status-automations page fixed-page"},[s("list-page-header",{attrs:{title:t.$t("status_automations.title"),"new-entry-label":t.$t("status_automations.new_status_automation")},on:{"new-clicked":t.onNewClicked}}),s("status-automation-list",{attrs:{entries:t.statusAutomations,"is-editable":!0,"is-loading":t.loading.list,"is-error":t.errors.list},on:{"edit-clicked":t.onEditClicked,"delete-clicked":t.onDeleteClicked}}),s("edit-status-automation-modal",{attrs:{active:t.modals.edit,"is-loading":t.loading.edit,"is-error":t.errors.edit,"status-automation-to-edit":t.statusAutomationToEdit},on:{cancel:function(e){t.modals.edit=!1},confirm:t.confirmEditStatusAutomation}}),s("delete-modal",{attrs:{active:t.modals.del,"is-loading":t.loading.del,"is-error":t.errors.del,text:t.deleteText,"error-text":t.$t("status_automations.delete_error")},on:{cancel:function(e){t.modals.del=!1},confirm:t.confirmDeleteStatusAutomation}})],1)},i=[],o=s("2f62"),n=s("536b"),r=s("5f48"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background",on:{click:function(e){return t.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.isEditing()?s("h1",{staticClass:"title"},[t._v(" "+t._s(t.$t("status_automations.edit_title"))+" ")]):s("h1",{staticClass:"title"},[t._v(" "+t._s(t.$t("status_automations.new_status_automation"))+" ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("h2",{staticClass:"subtitle"},[t._v(t._s(t.$t("status_automations.entity_title")))]),t.isEditing()?s("span",[t._v(" "+t._s(t.form.entityType)+" ")]):s("combobox",{attrs:{label:t.$t("status_automations.fields.entity_type"),options:t.entityTypeOptions,"locale-key-prefix":"status_automations.entity_types."},on:{enter:t.confirmClicked},model:{value:t.form.entityType,callback:function(e){t.$set(t.form,"entityType",e)},expression:"form.entityType"}}),s("h2",{staticClass:"subtitle"},[t._v(t._s(t.$t("status_automations.in_title")))]),s("div",{staticClass:"flexrow"},[s("combobox-task-type",{staticClass:"flexrow-item",attrs:{label:t.$t("status_automations.fields.in_task_type"),"task-type-list":t.form.inEntityTaskTypes},on:{enter:t.confirmClicked},model:{value:t.form.inTaskTypeId,callback:function(e){t.$set(t.form,"inTaskTypeId",e)},expression:"form.inTaskTypeId"}}),s("combobox-status",{staticClass:"flexrow-item",attrs:{label:t.$t("status_automations.fields.in_task_status"),"task-status-list":t.productionTaskStatuses},on:{enter:t.confirmClicked},model:{value:t.form.inTaskStatusId,callback:function(e){t.$set(t.form,"inTaskStatusId",e)},expression:"form.inTaskStatusId"}})],1),s("h2",{staticClass:"subtitle"},[t._v(t._s(t.$t("status_automations.out_title")))]),s("div",{staticClass:"flexrow"},[t.isEditing()||"asset"!=t.form.entityType?t._e():s("combobox",{staticClass:"flexrow-item margin-fix",attrs:{label:t.$t("status_automations.fields.out_field_type"),options:t.fieldTypeOptions,"locale-key-prefix":"status_automations.field_types."},on:{enter:t.confirmClicked},model:{value:t.form.outFieldType,callback:function(e){t.$set(t.form,"outFieldType",e)},expression:"form.outFieldType"}}),t.isEditing()&&"ready_for"==t.form.outFieldType?s("span",{staticClass:"flexrow-item"},[t._v(" Ready For ")]):t._e(),s("combobox-task-type",{staticClass:"flexrow-item",attrs:{label:t.$t("status_automations.fields.out_task_type"),"task-type-list":t.form.outEntityTaskTypes,"open-top":!0},on:{enter:t.confirmClicked},model:{value:t.form.outTaskTypeId,callback:function(e){t.$set(t.form,"outTaskTypeId",e)},expression:"form.outTaskTypeId"}}),"status"==t.form.outFieldType?s("combobox-status",{staticClass:"flexrow-item",attrs:{label:t.$t("status_automations.fields.out_task_status"),"task-status-list":t.productionTaskStatuses,"open-top":!0},on:{enter:t.confirmClicked},model:{value:t.form.outTaskStatusId,callback:function(e){t.$set(t.form,"outTaskStatusId",e)},expression:"form.outTaskStatusId"}}):t._e()],1)],1),s("modal-footer",{attrs:{"error-text":t.$t("status_automations.create_error"),"is-error":t.isError},on:{confirm:t.confirmClicked,cancel:function(e){return t.$emit("cancel")}}})],1)])])},c=[],l=s("d065"),d=s("992f"),m=s("e4fd"),f=s("56a0"),p=s("d5c9");function y(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function b(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?y(Object(s),!0).forEach((function(e){T(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function T(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var h={name:"edit-status-automation-modal",mixins:[l["a"]],components:{Combobox:d["a"],ComboboxTaskType:m["a"],ComboboxStatus:f["a"],ModalFooter:p["a"]},props:["onConfirmClicked","text","active","isLoading","isError","errorText","statusAutomationToEdit","taskStatus"],computed:b({},Object(o["c"])(["statusAutomations","statusAutomationsStatusOptions","assetTaskTypes","shotTaskTypes","productionTaskTypes","productionTaskStatuses"])),data:function(){return{entityTypeOptions:[{label:"asset",value:"asset"},{label:"shot",value:"shot"}],fieldTypeOptions:[{label:"status",value:"status"},{label:"ready_for",value:"ready_for"}],form:{entityType:"asset",mode:"status",inEntityTaskTypes:[],outEntityTaskTypes:[],inTaskTypeId:"",outTaskTypeId:"",inTaskStatusId:"",outTaskStatusId:""}}},methods:b(b({},Object(o["b"])([])),{},{confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.statusAutomationToEdit&&this.statusAutomationToEdit.id},setTaskTypes:function(t){"asset"===t?(this.form.inEntityTaskTypes=this.assetTaskTypes,this.form.outEntityTaskTypes=this.assetTaskTypes):"shot"===t&&(this.form.inEntityTaskTypes=this.shotTaskTypes,this.form.outEntityTaskTypes=this.shotTaskTypes)}}),watch:{statusAutomationToEdit:function(){if(this.statusAutomationToEdit){var t=[];"asset"===this.form.entityType?t=this.assetTaskTypes:"shot"===this.form.entityType&&(t=this.shotTaskTypes),this.form={entityType:this.isEditing()?this.statusAutomationToEdit.entity_type:"asset",inEntityTaskTypes:t,outEntityTaskTypes:t,inTaskTypeId:this.isEditing()?this.statusAutomationToEdit.in_task_type_id:t[0].id,inTaskStatusId:this.isEditing()?this.statusAutomationToEdit.in_task_status_id:this.productionTaskStatuses[0].id,outFieldType:this.isEditing()?this.statusAutomationToEdit.out_field_type:"status",outTaskTypeId:this.isEditing()?this.statusAutomationToEdit.out_task_type_id:t[1].id,outTaskStatusId:this.isEditing()?this.statusAutomationToEdit.out_task_status_id:this.productionTaskStatuses[1].id}}},"form.entityType":function(t){this.setTaskTypes(t),this.isEditing()||(this.form.inTaskTypeId=this.form.inEntityTaskTypes[0].id,this.form.inTaskStatusId=this.productionTaskStatuses[0].id,this.form.outTaskTypeId=this.form.outEntityTaskTypes[1].id,this.form.outTaskStatusId=this.productionTaskStatuses[1].id)},"form.outFieldType":function(t){"ready_for"===t?(this.form.outEntityTaskTypes=this.shotTaskTypes,this.form.outTaskTypeId=this.shotTaskTypes[1].id):"status"===t&&(this.setTaskTypes(this.form.entityType),this.form.outTaskTypeId=this.form.outEntityTaskTypes[1].id)}}},k=h,_=(s("fe9a"),s("0c7c")),v=Object(_["a"])(k,u,c,!1,null,"32b11fbb",null),O=v.exports,g=s("459c");function w(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function j(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?w(Object(s),!0).forEach((function(e){E(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function E(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var C={name:"status-automations",components:{DeleteModal:r["a"],EditStatusAutomationModal:O,ListPageHeader:g["a"],StatusAutomationList:n["a"]},data:function(){return{modals:{edit:!1,del:!1},loading:{edit:!1,del:!1,list:!1},errors:{edit:!1,del:!1,list:!1},statusAutomationToDelete:null,statusAutomationToEdit:null}},computed:j(j({},Object(o["c"])(["statusAutomations"])),{},{deleteText:function(){var t=this.statusAutomationToDelete;return t?this.$t("custom_actions.delete_text",{name:t.name}):""}}),created:function(){var t=this;this.loading.list=!0,this.errors.list=!1,this.loadStatusAutomations((function(e){t.loading.list=!1,e&&(t.errors.list=!0)}))},methods:j(j({},Object(o["b"])(["deleteStatusAutomation","editStatusAutomation","loadTaskStatuses","loadStatusAutomations","newStatusAutomation"])),{},{confirmEditStatusAutomation:function(t){var e=this,s="newStatusAutomation";this.statusAutomationToEdit&&this.statusAutomationToEdit.id&&(s="editStatusAutomation",t.id=this.statusAutomationToEdit.id),this.loading.edit=!0,this.errors.edit=!1,this[s](t).then((function(){e.loading.edit=!1,e.modals.edit=!1})).catch((function(t){console.error(t),e.errors.edit=!0,e.loading.edit=!1}))},confirmDeleteStatusAutomation:function(){var t=this;this.loading.del=!0,this.errors.del=!1,this.deleteStatusAutomation(this.statusAutomationToDelete).then((function(){t.loading.del=!1,t.modals.del=!1})).catch((function(e){console.error(e),t.errors.del=!0,t.loading.del=!1}))},onNewClicked:function(){this.statusAutomationToEdit={},this.errors.edit=!1,this.modals.edit=!0},onEditClicked:function(t){this.statusAutomationToEdit=t,this.errors.edit=!1,this.modals.edit=!0},onDeleteClicked:function(t){this.statusAutomationToDelete=t,this.errors.del=!1,this.modals.del=!0}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.$t("status_automations.title")," - Kitsu")}}},S=C,x=Object(_["a"])(S,a,i,!1,null,"b1ef43c8",null);e["default"]=x.exports},b36f:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"name"},[s("div",{staticClass:"tag",class:[t.disable?"canceled":""],style:{background:t.color,color:t.textColor},attrs:{title:t.entry.name}},[t._v(" "+t._s(t.entry.short_name)+" ")])])},i=[],o=s("2f62");function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function r(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){u(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function u(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c={name:"task-status-name",components:{},props:{entry:{type:Object,default:function(){}},disable:{type:Boolean,default:!1}},computed:r(r({},Object(o["c"])(["isDarkTheme"])),{},{color:function(){return"Todo"===this.entry.name&&this.isDarkTheme?"#5F626A":this.entry.color},textColor:function(){return this.entry.is_default&&!this.isDarkTheme?"#333":"white"}}),methods:r({},Object(o["b"])([]))},l=c,d=(s("81f8"),s("0c7c")),m=Object(d["a"])(l,a,i,!1,null,"e2980138",null);e["a"]=m.exports},f660:function(t,e,s){},fe9a:function(t,e,s){"use strict";s("4afa")}}]);
//# sourceMappingURL=chunk-5019b65a.5a5e495b.js.map